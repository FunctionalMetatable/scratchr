var Prototype={Version:"1.5.1.1",Browser:{IE:!!(window.attachEvent&&!window.opera),Opera:!!window.opera,WebKit:navigator.userAgent.indexOf("AppleWebKit/")>-1,Gecko:navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("KHTML")==-1},BrowserFeatures:{XPath:!!document.evaluate,ElementExtensions:!!window.HTMLElement,SpecificElementExtensions:document.createElement("div").__proto__!==document.createElement("form").__proto__},ScriptFragment:"<script[^>]*>([\\S\\s]*?)<\/script>",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,
emptyFunction:function(){},K:function(a){return a}},Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},Abstract={};Object.extend=function(a,c){for(var d in c)a[d]=c[d];return a};
Object.extend(Object,{inspect:function(a){try{if(a===undefined)return"undefined";if(a===null)return"null";return a.inspect?a.inspect():a.toString()}catch(c){if(c instanceof RangeError)return"...";throw c;}},toJSON:function(a){switch(typeof a){case "undefined":case "function":case "unknown":return;case "boolean":return a.toString()}if(a===null)return"null";if(a.toJSON)return a.toJSON();if(a.ownerDocument!==document){var c=[];for(var d in a){var g=Object.toJSON(a[d]);g!==undefined&&c.push(d.toJSON()+
": "+g)}return"{"+c.join(", ")+"}"}},keys:function(a){var c=[];for(var d in a)c.push(d);return c},values:function(a){var c=[];for(var d in a)c.push(a[d]);return c},clone:function(a){return Object.extend({},a)}});Function.prototype.bind=function(){var a=this,c=$A(arguments),d=c.shift();return function(){return a.apply(d,c.concat($A(arguments)))}};Function.prototype.bindAsEventListener=function(a){var c=this,d=$A(arguments);a=d.shift();return function(g){return c.apply(a,[g||window.event].concat(d))}};
Object.extend(Number.prototype,{toColorPart:function(){return this.toPaddedString(2,16)},succ:function(){return this+1},times:function(a){$R(0,this,true).each(a);return this},toPaddedString:function(a,c){var d=this.toString(c||10);return"0".times(a-d.length)+d},toJSON:function(){return isFinite(this)?this.toString():"null"}});
Date.prototype.toJSON=function(){return'"'+this.getFullYear()+"-"+(this.getMonth()+1).toPaddedString(2)+"-"+this.getDate().toPaddedString(2)+"T"+this.getHours().toPaddedString(2)+":"+this.getMinutes().toPaddedString(2)+":"+this.getSeconds().toPaddedString(2)+'"'};var Try={these:function(){for(var a,c=0,d=arguments.length;c<d;c++){var g=arguments[c];try{a=g();break}catch(j){}}return a}},PeriodicalExecuter=Class.create();
PeriodicalExecuter.prototype={initialize:function(a,c){this.callback=a;this.frequency=c;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1E3)},stop:function(){if(this.timer){clearInterval(this.timer);this.timer=null}},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=true;this.callback(this)}finally{this.currentlyExecuting=false}}};
Object.extend(String,{interpret:function(a){return a==null?"":String(a)},specialChar:{"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,{gsub:function(a,c){var d="",g=this,j;for(c=arguments.callee.prepareReplacement(c);g.length>0;)if(j=g.match(a)){d+=g.slice(0,j.index);d+=String.interpret(c(j));g=g.slice(j.index+j[0].length)}else{d+=g;g=""}return d},sub:function(a,c,d){c=this.gsub.prepareReplacement(c);d=d===undefined?1:d;return this.gsub(a,function(g){if(--d<0)return g[0];return c(g)})},scan:function(a,c){this.gsub(a,c);return this},truncate:function(a,c){a=a||30;c=c===undefined?"...":c;return this.length>
a?this.slice(0,a-c.length)+c:this},strip:function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},stripTags:function(){return this.replace(/<\/?[^>]+>/gi,"")},stripScripts:function(){return this.replace(RegExp(Prototype.ScriptFragment,"img"),"")},extractScripts:function(){var a=RegExp(Prototype.ScriptFragment,"img"),c=RegExp(Prototype.ScriptFragment,"im");return(this.match(a)||[]).map(function(d){return(d.match(c)||["",""])[1]})},evalScripts:function(){return this.extractScripts().map(function(a){return eval(a)})},
escapeHTML:function(){var a=arguments.callee;a.text.data=this;return a.div.innerHTML},unescapeHTML:function(){var a=document.createElement("div");a.innerHTML=this.stripTags();return a.childNodes[0]?a.childNodes.length>1?$A(a.childNodes).inject("",function(c,d){return c+d.nodeValue}):a.childNodes[0].nodeValue:""},toQueryParams:function(a){var c=this.strip().match(/([^?#]*)(#.*)?$/);if(!c)return{};return c[1].split(a||"&").inject({},function(d,g){if((g=g.split("="))[0]){var j=decodeURIComponent(g.shift()),
e=g.length>1?g.join("="):g[0];if(e!=undefined)e=decodeURIComponent(e);if(j in d){if(d[j].constructor!=Array)d[j]=[d[j]];d[j].push(e)}else d[j]=e}return d})},toArray:function(){return this.split("")},succ:function(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)},times:function(a){for(var c="",d=0;d<a;d++)c+=this;return c},camelize:function(){var a=this.split("-"),c=a.length;if(c==1)return a[0];for(var d=this.charAt(0)=="-"?a[0].charAt(0).toUpperCase()+a[0].substring(1):
a[0],g=1;g<c;g++)d+=a[g].charAt(0).toUpperCase()+a[g].substring(1);return d},capitalize:function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},underscore:function(){return this.gsub(/::/,"/").gsub(/([A-Z]+)([A-Z][a-z])/,"#{1}_#{2}").gsub(/([a-z\d])([A-Z])/,"#{1}_#{2}").gsub(/-/,"_").toLowerCase()},dasherize:function(){return this.gsub(/_/,"-")},inspect:function(a){var c=this.gsub(/[\x00-\x1f\\]/,function(d){var g=String.specialChar[d[0]];return g?g:"\\u00"+d[0].charCodeAt().toPaddedString(2,
16)});if(a)return'"'+c.replace(/"/g,'\\"')+'"';return"'"+c.replace(/'/g,"\\'")+"'"},toJSON:function(){return this.inspect(true)},unfilterJSON:function(a){return this.sub(a||Prototype.JSONFilter,"#{1}")},isJSON:function(){return/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(this.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""))},evalJSON:function(a){var c=this.unfilterJSON();try{if(!a||c.isJSON())return eval("("+c+")")}catch(d){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());},include:function(a){return this.indexOf(a)>
-1},startsWith:function(a){return this.indexOf(a)===0},endsWith:function(a){var c=this.length-a.length;return c>=0&&this.lastIndexOf(a)===c},empty:function(){return this==""},blank:function(){return/^\s*$/.test(this)}});if(Prototype.Browser.WebKit||Prototype.Browser.IE)Object.extend(String.prototype,{escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(){return this.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")}});
String.prototype.gsub.prepareReplacement=function(a){if(typeof a=="function")return a;var c=new Template(a);return function(d){return c.evaluate(d)}};String.prototype.parseQuery=String.prototype.toQueryParams;Object.extend(String.prototype.escapeHTML,{div:document.createElement("div"),text:document.createTextNode("")});with(String.prototype.escapeHTML)div.appendChild(text);var Template=Class.create();Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;
Template.prototype={initialize:function(a,c){this.template=a.toString();this.pattern=c||Template.Pattern},evaluate:function(a){return this.template.gsub(this.pattern,function(c){var d=c[1];if(d=="\\")return c[2];return d+String.interpret(a[c[3]])})}};
var $break={},$continue=Error('"throw $continue" is deprecated, use "return" instead'),Enumerable={each:function(a){var c=0;try{this._each(function(g){a(g,c++)})}catch(d){if(d!=$break)throw d;}return this},eachSlice:function(a,c){for(var d=-a,g=[],j=this.toArray();(d+=a)<j.length;)g.push(j.slice(d,d+a));return g.map(c)},all:function(a){var c=true;this.each(function(d,g){c=c&&!!(a||Prototype.K)(d,g);if(!c)throw $break;});return c},any:function(a){var c=false;this.each(function(d,g){if(c=!!(a||Prototype.K)(d,
g))throw $break;});return c},collect:function(a){var c=[];this.each(function(d,g){c.push((a||Prototype.K)(d,g))});return c},detect:function(a){var c;this.each(function(d,g){if(a(d,g)){c=d;throw $break;}});return c},findAll:function(a){var c=[];this.each(function(d,g){a(d,g)&&c.push(d)});return c},grep:function(a,c){var d=[];this.each(function(g,j){if(g.toString().match(a))d.push((c||Prototype.K)(g,j))});return d},include:function(a){var c=false;this.each(function(d){if(d==a){c=true;throw $break;}});
return c},inGroupsOf:function(a,c){c=c===undefined?null:c;return this.eachSlice(a,function(d){for(;d.length<a;)d.push(c);return d})},inject:function(a,c){this.each(function(d,g){a=c(a,d,g)});return a},invoke:function(a){var c=$A(arguments).slice(1);return this.map(function(d){return d[a].apply(d,c)})},max:function(a){var c;this.each(function(d,g){d=(a||Prototype.K)(d,g);if(c==undefined||d>=c)c=d});return c},min:function(a){var c;this.each(function(d,g){d=(a||Prototype.K)(d,g);if(c==undefined||d<c)c=
d});return c},partition:function(a){var c=[],d=[];this.each(function(g,j){((a||Prototype.K)(g,j)?c:d).push(g)});return[c,d]},pluck:function(a){var c=[];this.each(function(d){c.push(d[a])});return c},reject:function(a){var c=[];this.each(function(d,g){a(d,g)||c.push(d)});return c},sortBy:function(a){return this.map(function(c,d){return{value:c,criteria:a(c,d)}}).sort(function(c,d){var g=c.criteria,j=d.criteria;return g<j?-1:g>j?1:0}).pluck("value")},toArray:function(){return this.map()},zip:function(){var a=
Prototype.K,c=$A(arguments);if(typeof c.last()=="function")a=c.pop();var d=[this].concat(c).map($A);return this.map(function(g,j){return a(d.pluck(j))})},size:function(){return this.toArray().length},inspect:function(){return"#<Enumerable:"+this.toArray().inspect()+">"}};Object.extend(Enumerable,{map:Enumerable.collect,find:Enumerable.detect,select:Enumerable.findAll,member:Enumerable.include,entries:Enumerable.toArray});
var $A=Array.from=function(a){if(!a)return[];if(a.toArray)return a.toArray();else{for(var c=[],d=0,g=a.length;d<g;d++)c.push(a[d]);return c}};if(Prototype.Browser.WebKit)$A=Array.from=function(a){if(!a)return[];if(!(typeof a=="function"&&a=="[object NodeList]")&&a.toArray)return a.toArray();else{for(var c=[],d=0,g=a.length;d<g;d++)c.push(a[d]);return c}};Object.extend(Array.prototype,Enumerable);if(!Array.prototype._reverse)Array.prototype._reverse=Array.prototype.reverse;
Object.extend(Array.prototype,{_each:function(a){for(var c=0,d=this.length;c<d;c++)a(this[c])},clear:function(){this.length=0;return this},first:function(){return this[0]},last:function(){return this[this.length-1]},compact:function(){return this.select(function(a){return a!=null})},flatten:function(){return this.inject([],function(a,c){return a.concat(c&&c.constructor==Array?c.flatten():[c])})},without:function(){var a=$A(arguments);return this.select(function(c){return!a.include(c)})},indexOf:function(a){for(var c=
0,d=this.length;c<d;c++)if(this[c]==a)return c;return-1},reverse:function(a){return(a!==false?this:this.toArray())._reverse()},reduce:function(){return this.length>1?this:this[0]},uniq:function(a){return this.inject([],function(c,d,g){if(0==g||(a?c.last()!=d:!c.include(d)))c.push(d);return c})},clone:function(){return[].concat(this)},size:function(){return this.length},inspect:function(){return"["+this.map(Object.inspect).join(", ")+"]"},toJSON:function(){var a=[];this.each(function(c){c=Object.toJSON(c);
c!==undefined&&a.push(c)});return"["+a.join(", ")+"]"}});Array.prototype.toArray=Array.prototype.clone;function $w(a){return(a=a.strip())?a.split(/\s+/):[]}if(Prototype.Browser.Opera)Array.prototype.concat=function(){for(var a=[],c=0,d=this.length;c<d;c++)a.push(this[c]);c=0;for(d=arguments.length;c<d;c++)if(arguments[c].constructor==Array)for(var g=0,j=arguments[c].length;g<j;g++)a.push(arguments[c][g]);else a.push(arguments[c]);return a};
var Hash=function(a){a instanceof Hash?this.merge(a):Object.extend(this,a||{})};
Object.extend(Hash,{toQueryString:function(a){var c=[];c.add=arguments.callee.addPair;this.prototype._each.call(a,function(d){if(d.key){var g=d.value;if(g&&typeof g=="object")g.constructor==Array&&g.each(function(j){c.add(d.key,j)});else c.add(d.key,g)}});return c.join("&")},toJSON:function(a){var c=[];this.prototype._each.call(a,function(d){var g=Object.toJSON(d.value);g!==undefined&&c.push(d.key.toJSON()+": "+g)});return"{"+c.join(", ")+"}"}});
Hash.toQueryString.addPair=function(a,c){a=encodeURIComponent(a);c===undefined?this.push(a):this.push(a+"="+(c==null?"":encodeURIComponent(c)))};Object.extend(Hash.prototype,Enumerable);
Object.extend(Hash.prototype,{_each:function(a){for(var c in this){var d=this[c];if(!(d&&d==Hash.prototype[c])){var g=[c,d];g.key=c;g.value=d;a(g)}}},keys:function(){return this.pluck("key")},values:function(){return this.pluck("value")},merge:function(a){return $H(a).inject(this,function(c,d){c[d.key]=d.value;return c})},remove:function(){for(var a,c=0,d=arguments.length;c<d;c++){var g=this[arguments[c]];if(g!==undefined)if(a===undefined)a=g;else{if(a.constructor!=Array)a=[a];a.push(g)}delete this[arguments[c]]}return a},
toQueryString:function(){return Hash.toQueryString(this)},inspect:function(){return"#<Hash:{"+this.map(function(a){return a.map(Object.inspect).join(": ")}).join(", ")+"}>"},toJSON:function(){return Hash.toJSON(this)}});function $H(a){if(a instanceof Hash)return a;return new Hash(a)}
if(function(){var a=0,c=function(g){this.key=g};c.prototype.key="foo";for(var d in new c("bar"))a++;return a>1}())Hash.prototype._each=function(a){var c=[];for(var d in this){var g=this[d];if(!(g&&g==Hash.prototype[d]||c.include(d))){c.push(d);var j=[d,g];j.key=d;j.value=g;a(j)}}};ObjectRange=Class.create();Object.extend(ObjectRange.prototype,Enumerable);
Object.extend(ObjectRange.prototype,{initialize:function(a,c,d){this.start=a;this.end=c;this.exclusive=d},_each:function(a){for(var c=this.start;this.include(c);){a(c);c=c.succ()}},include:function(a){if(a<this.start)return false;if(this.exclusive)return a<this.end;return a<=this.end}});
var $R=function(a,c,d){return new ObjectRange(a,c,d)},Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};
Ajax.Responders={responders:[],_each:function(a){this.responders._each(a)},register:function(a){this.include(a)||this.responders.push(a)},unregister:function(a){this.responders=this.responders.without(a)},dispatch:function(a,c,d,g){this.each(function(j){if(typeof j[a]=="function")try{j[a].apply(j,[c,d,g])}catch(e){}})}};Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});Ajax.Base=function(){};
Ajax.Base.prototype={setOptions:function(a){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:""};Object.extend(this.options,a||{});this.options.method=this.options.method.toLowerCase();if(typeof this.options.parameters=="string")this.options.parameters=this.options.parameters.toQueryParams()}};Ajax.Request=Class.create();Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Request.prototype=Object.extend(new Ajax.Base,{_complete:false,initialize:function(a,c){this.transport=Ajax.getTransport();this.setOptions(c);this.request(a)},request:function(a){this.url=a;this.method=this.options.method;a=Object.clone(this.options.parameters);if(!["get","post"].include(this.method)){a._method=this.method;this.method="post"}this.parameters=a;if(a=Hash.toQueryString(a))if(this.method=="get")this.url+=(this.url.include("?")?"&":"?")+a;else if(/Konqueror|Safari|KHTML/.test(navigator.userAgent))a+=
"&_=";try{this.options.onCreate&&this.options.onCreate(this.transport);Ajax.Responders.dispatch("onCreate",this,this.transport);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);this.options.asynchronous&&setTimeout(function(){this.respondToReadyState(1)}.bind(this),10);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?this.options.postBody||a:null;this.transport.send(this.body);!this.options.asynchronous&&
this.transport.overrideMimeType&&this.onStateChange()}catch(c){this.dispatchException(c)}},onStateChange:function(){var a=this.transport.readyState;a>1&&!(a==4&&this._complete)&&this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var a={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,Accept:"text/javascript, text/html, application/xml, text/xml, */*"};if(this.method=="post"){a["Content-type"]=this.options.contentType+(this.options.encoding?
"; charset="+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005)a.Connection="close"}if(typeof this.options.requestHeaders=="object"){var c=this.options.requestHeaders;if(typeof c.push=="function")for(var d=0,g=c.length;d<g;d+=2)a[c[d]]=c[d+1];else $H(c).each(function(e){a[e.key]=e.value})}for(var j in a)this.transport.setRequestHeader(j,a[j])},success:function(){return!this.transport.status||this.transport.status>=200&&this.transport.status<
300},respondToReadyState:function(a){a=Ajax.Request.Events[a];var c=this.transport,d=this.evalJSON();if(a=="Complete"){try{this._complete=true;(this.options["on"+this.transport.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(c,d)}catch(g){this.dispatchException(g)}var j=this.getHeader("Content-type");j&&j.strip().match(/^(text|application)\/(x-)?(java|ecma)script(;.*)?$/i)&&this.evalResponse()}try{(this.options["on"+a]||Prototype.emptyFunction)(c,d);Ajax.Responders.dispatch("on"+
a,this,c,d)}catch(e){this.dispatchException(e)}if(a=="Complete")this.transport.onreadystatechange=Prototype.emptyFunction},getHeader:function(a){try{return this.transport.getResponseHeader(a)}catch(c){return null}},evalJSON:function(){try{var a=this.getHeader("X-JSON");return a?a.evalJSON():null}catch(c){return null}},evalResponse:function(){try{return eval((this.transport.responseText||"").unfilterJSON())}catch(a){this.dispatchException(a)}},dispatchException:function(a){(this.options.onException||
Prototype.emptyFunction)(this,a);Ajax.Responders.dispatch("onException",this,a)}});Ajax.Updater=Class.create();
Object.extend(Object.extend(Ajax.Updater.prototype,Ajax.Request.prototype),{initialize:function(a,c,d){this.container={success:a.success||a,failure:a.failure||(a.success?null:a)};this.transport=Ajax.getTransport();this.setOptions(d);var g=this.options.onComplete||Prototype.emptyFunction;this.options.onComplete=function(j,e){this.updateContent();g(j,e)}.bind(this);this.request(c)},updateContent:function(){var a=this.container[this.success()?"success":"failure"],c=this.transport.responseText;this.options.evalScripts||
(c=c.stripScripts());if(a=$(a))if(this.options.insertion)new this.options.insertion(a,c);else a.update(c);this.success()&&this.onComplete&&setTimeout(this.onComplete.bind(this),10)}});Ajax.PeriodicalUpdater=Class.create();
Ajax.PeriodicalUpdater.prototype=Object.extend(new Ajax.Base,{initialize:function(a,c,d){this.setOptions(d);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=a;this.url=c;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,
arguments)},updateComplete:function(a){if(this.options.decay){this.decay=a.responseText==this.lastText?this.decay*this.options.decay:1;this.lastText=a.responseText}this.timer=setTimeout(this.onTimerEvent.bind(this),this.decay*this.frequency*1E3)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
function $(a){if(arguments.length>1){for(var c=0,d=[],g=arguments.length;c<g;c++)d.push($(arguments[c]));return d}if(typeof a=="string")a=document.getElementById(a);return Element.extend(a)}
if(Prototype.BrowserFeatures.XPath){document._getElementsByXPath=function(a,c){for(var d=[],g=document.evaluate(a,$(c)||document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),j=0,e=g.snapshotLength;j<e;j++)d.push(g.snapshotItem(j));return d};document.getElementsByClassName=function(a,c){return document._getElementsByXPath(".//*[contains(concat(' ', @class, ' '), ' "+a+" ')]",c)}}else document.getElementsByClassName=function(a,c){for(var d=($(c)||document.body).getElementsByTagName("*"),g=[],j,
e=RegExp("(^|\\s)"+a+"(\\s|$)"),q=0,t=d.length;q<t;q++){j=d[q];var p=j.className;if(p.length!=0)if(p==a||p.match(e))g.push(Element.extend(j))}return g};if(!window.Element)var Element={};
Element.extend=function(a){var c=Prototype.BrowserFeatures;if(!a||!a.tagName||a.nodeType==3||a._extended||c.SpecificElementExtensions||a==window)return a;var d={},g=a.tagName,j=Element.extend.cache,e=Element.Methods.ByTag;if(!c.ElementExtensions){Object.extend(d,Element.Methods);Object.extend(d,Element.Methods.Simulated)}e[g]&&Object.extend(d,e[g]);for(var q in d){c=d[q];if(typeof c=="function"&&!(q in a))a[q]=j.findOrStore(c)}a._extended=Prototype.emptyFunction;return a};
Element.extend.cache={findOrStore:function(a){return this[a]=this[a]||function(){return a.apply(null,[this].concat($A(arguments)))}}};
Element.Methods={visible:function(a){return $(a).style.display!="none"},toggle:function(a){a=$(a);Element[Element.visible(a)?"hide":"show"](a);return a},hide:function(a){$(a).style.display="none";return a},show:function(a){$(a).style.display="";return a},remove:function(a){a=$(a);a.parentNode.removeChild(a);return a},update:function(a,c){c=typeof c=="undefined"?"":c.toString();$(a).innerHTML=c.stripScripts();setTimeout(function(){c.evalScripts()},10);return a},replace:function(a,c){a=$(a);c=typeof c==
"undefined"?"":c.toString();if(a.outerHTML)a.outerHTML=c.stripScripts();else{var d=a.ownerDocument.createRange();d.selectNodeContents(a);a.parentNode.replaceChild(d.createContextualFragment(c.stripScripts()),a)}setTimeout(function(){c.evalScripts()},10);return a},inspect:function(a){a=$(a);var c="<"+a.tagName.toLowerCase();$H({id:"id",className:"class"}).each(function(d){var g=d.first();d=d.last();if(g=(a[g]||"").toString())c+=" "+d+"="+g.inspect(true)});return c+">"},recursivelyCollect:function(a,
c){a=$(a);for(var d=[];a=a[c];)a.nodeType==1&&d.push(Element.extend(a));return d},ancestors:function(a){return $(a).recursivelyCollect("parentNode")},descendants:function(a){return $A($(a).getElementsByTagName("*")).each(Element.extend)},firstDescendant:function(a){for(a=$(a).firstChild;a&&a.nodeType!=1;)a=a.nextSibling;return $(a)},immediateDescendants:function(a){if(!(a=$(a).firstChild))return[];for(;a&&a.nodeType!=1;)a=a.nextSibling;if(a)return[a].concat($(a).nextSiblings());return[]},previousSiblings:function(a){return $(a).recursivelyCollect("previousSibling")},
nextSiblings:function(a){return $(a).recursivelyCollect("nextSibling")},siblings:function(a){a=$(a);return a.previousSiblings().reverse().concat(a.nextSiblings())},match:function(a,c){if(typeof c=="string")c=new Selector(c);return c.match($(a))},up:function(a,c,d){a=$(a);if(arguments.length==1)return $(a.parentNode);var g=a.ancestors();return c?Selector.findElement(g,c,d):g[d||0]},down:function(a,c,d){a=$(a);if(arguments.length==1)return a.firstDescendant();var g=a.descendants();return c?Selector.findElement(g,
c,d):g[d||0]},previous:function(a,c,d){a=$(a);if(arguments.length==1)return $(Selector.handlers.previousElementSibling(a));var g=a.previousSiblings();return c?Selector.findElement(g,c,d):g[d||0]},next:function(a,c,d){a=$(a);if(arguments.length==1)return $(Selector.handlers.nextElementSibling(a));var g=a.nextSiblings();return c?Selector.findElement(g,c,d):g[d||0]},getElementsBySelector:function(){var a=$A(arguments),c=$(a.shift());return Selector.findChildElements(c,a)},getElementsByClassName:function(a,
c){return document.getElementsByClassName(c,a)},readAttribute:function(a,c){a=$(a);if(Prototype.Browser.IE){if(!a.attributes)return null;var d=Element._attributeTranslations;if(d.values[c])return d.values[c](a,c);if(d.names[c])c=d.names[c];return(d=a.attributes[c])?d.nodeValue:null}return a.getAttribute(c)},getHeight:function(a){return $(a).getDimensions().height},getWidth:function(a){return $(a).getDimensions().width},classNames:function(a){return new Element.ClassNames(a)},hasClassName:function(a,
c){if(a=$(a)){var d=a.className;if(d.length==0)return false;if(d==c||d.match(RegExp("(^|\\s)"+c+"(\\s|$)")))return true;return false}},addClassName:function(a,c){if(a=$(a)){Element.classNames(a).add(c);return a}},removeClassName:function(a,c){if(a=$(a)){Element.classNames(a).remove(c);return a}},toggleClassName:function(a,c){if(a=$(a)){Element.classNames(a)[a.hasClassName(c)?"remove":"add"](c);return a}},observe:function(){Event.observe.apply(Event,arguments);return $A(arguments).first()},stopObserving:function(){Event.stopObserving.apply(Event,
arguments);return $A(arguments).first()},cleanWhitespace:function(a){a=$(a);for(var c=a.firstChild;c;){var d=c.nextSibling;c.nodeType==3&&!/\S/.test(c.nodeValue)&&a.removeChild(c);c=d}return a},empty:function(a){return $(a).innerHTML.blank()},descendantOf:function(a,c){a=$(a);for(c=$(c);a=a.parentNode;)if(a==c)return true;return false},scrollTo:function(a){a=$(a);var c=Position.cumulativeOffset(a);window.scrollTo(c[0],c[1]);return a},getStyle:function(a,c){a=$(a);c=c=="float"?"cssFloat":c.camelize();
var d=a.style[c];if(!d)d=(d=document.defaultView.getComputedStyle(a,null))?d[c]:null;if(c=="opacity")return d?parseFloat(d):1;return d=="auto"?null:d},getOpacity:function(a){return $(a).getStyle("opacity")},setStyle:function(a,c,d){a=$(a);var g=a.style;for(var j in c)if(j=="opacity")a.setOpacity(c[j]);else g[j=="float"||j=="cssFloat"?g.styleFloat===undefined?"cssFloat":"styleFloat":d?j:j.camelize()]=c[j];return a},setOpacity:function(a,c){a=$(a);a.style.opacity=c==1||c===""?"":c<1.0E-5?0:c;return a},
getDimensions:function(a){a=$(a);var c=$(a).getStyle("display");if(c!="none"&&c!=null)return{width:a.offsetWidth,height:a.offsetHeight};c=a.style;var d=c.visibility,g=c.position,j=c.display;c.visibility="hidden";c.position="absolute";c.display="block";var e=a.clientWidth;a=a.clientHeight;c.display=j;c.position=g;c.visibility=d;return{width:e,height:a}},makePositioned:function(a){a=$(a);var c=Element.getStyle(a,"position");if(c=="static"||!c){a._madePositioned=true;a.style.position="relative";if(window.opera){a.style.top=
0;a.style.left=0}}return a},undoPositioned:function(a){a=$(a);if(a._madePositioned){a._madePositioned=undefined;a.style.position=a.style.top=a.style.left=a.style.bottom=a.style.right=""}return a},makeClipping:function(a){a=$(a);if(a._overflow)return a;a._overflow=a.style.overflow||"auto";if((Element.getStyle(a,"overflow")||"visible")!="hidden")a.style.overflow="hidden";return a},undoClipping:function(a){a=$(a);if(!a._overflow)return a;a.style.overflow=a._overflow=="auto"?"":a._overflow;a._overflow=
null;return a}};Object.extend(Element.Methods,{childOf:Element.Methods.descendantOf,childElements:Element.Methods.immediateDescendants});
if(Prototype.Browser.Opera){Element.Methods._getStyle=Element.Methods.getStyle;Element.Methods.getStyle=function(a,c){switch(c){case "left":case "top":case "right":case "bottom":if(Element._getStyle(a,"position")=="static")return null;default:return Element._getStyle(a,c)}}}else if(Prototype.Browser.IE){Element.Methods.getStyle=function(a,c){a=$(a);c=c=="float"||c=="cssFloat"?"styleFloat":c.camelize();var d=a.style[c];if(!d&&a.currentStyle)d=a.currentStyle[c];if(c=="opacity"){if(d=(a.getStyle("filter")||
"").match(/alpha\(opacity=(.*)\)/))if(d[1])return parseFloat(d[1])/100;return 1}if(d=="auto"){if((c=="width"||c=="height")&&a.getStyle("display")!="none")return a["offset"+c.capitalize()]+"px";return null}return d};Element.Methods.setOpacity=function(a,c){a=$(a);var d=a.getStyle("filter"),g=a.style;if(c==1||c===""){g.filter=d.replace(/alpha\([^\)]*\)/gi,"");return a}else if(c<1.0E-5)c=0;g.filter=d.replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+c*100+")";return a};Element.Methods.update=function(a,
c){a=$(a);c=typeof c=="undefined"?"":c.toString();var d=a.tagName.toUpperCase();if(["THEAD","TBODY","TR","TD"].include(d)){var g=document.createElement("div");switch(d){case "THEAD":case "TBODY":g.innerHTML="<table><tbody>"+c.stripScripts()+"</tbody></table>";depth=2;break;case "TR":g.innerHTML="<table><tbody><tr>"+c.stripScripts()+"</tr></tbody></table>";depth=3;break;case "TD":g.innerHTML="<table><tbody><tr><td>"+c.stripScripts()+"</td></tr></tbody></table>";depth=4}$A(a.childNodes).each(function(j){a.removeChild(j)});
depth.times(function(){g=g.firstChild});$A(g.childNodes).each(function(j){a.appendChild(j)})}else a.innerHTML=c.stripScripts();setTimeout(function(){c.evalScripts()},10);return a}}else if(Prototype.Browser.Gecko)Element.Methods.setOpacity=function(a,c){a=$(a);a.style.opacity=c==1?0.999999:c===""?"":c<1.0E-5?0:c;return a};
Element._attributeTranslations={names:{colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",datetime:"dateTime",accesskey:"accessKey",tabindex:"tabIndex",enctype:"encType",maxlength:"maxLength",readonly:"readOnly",longdesc:"longDesc"},values:{_getAttr:function(a,c){return a.getAttribute(c,2)},_flag:function(a,c){return $(a).hasAttribute(c)?c:null},style:function(a){return a.style.cssText.toLowerCase()},title:function(a){a=a.getAttributeNode("title");return a.specified?a.nodeValue:null}}};
(function(){Object.extend(this,{href:this._getAttr,src:this._getAttr,type:this._getAttr,disabled:this._flag,checked:this._flag,readonly:this._flag,multiple:this._flag})}).call(Element._attributeTranslations.values);Element.Methods.Simulated={hasAttribute:function(a,c){var d;c=Element._attributeTranslations.names[c]||c;return(d=$(a).getAttributeNode(c))&&d.specified}};Element.Methods.ByTag={};Object.extend(Element,Element.Methods);
if(!Prototype.BrowserFeatures.ElementExtensions&&document.createElement("div").__proto__){window.HTMLElement={};window.HTMLElement.prototype=document.createElement("div").__proto__;Prototype.BrowserFeatures.ElementExtensions=true}Element.hasAttribute=function(a,c){if(a.hasAttribute)return a.hasAttribute(c);return Element.Methods.Simulated.hasAttribute(a,c)};
Element.addMethods=function(a){function c(p){p=p.toUpperCase();Element.Methods.ByTag[p]||(Element.Methods.ByTag[p]={});Object.extend(Element.Methods.ByTag[p],a)}function d(p,v,A){A=A||false;var H=Element.extend.cache;for(var C in p){var D=p[C];if(!A||!(C in v))v[C]=H.findOrStore(D)}}function g(p){var v,A={OPTGROUP:"OptGroup",TEXTAREA:"TextArea",P:"Paragraph",FIELDSET:"FieldSet",UL:"UList",OL:"OList",DL:"DList",DIR:"Directory",H1:"Heading",H2:"Heading",H3:"Heading",H4:"Heading",H5:"Heading",H6:"Heading",
Q:"Quote",INS:"Mod",DEL:"Mod",A:"Anchor",IMG:"Image",CAPTION:"TableCaption",COL:"TableCol",COLGROUP:"TableCol",THEAD:"TableSection",TFOOT:"TableSection",TBODY:"TableSection",TR:"TableRow",TH:"TableCell",TD:"TableCell",FRAMESET:"FrameSet",IFRAME:"IFrame"};if(A[p])v="HTML"+A[p]+"Element";if(window[v])return window[v];v="HTML"+p+"Element";if(window[v])return window[v];v="HTML"+p.capitalize()+"Element";if(window[v])return window[v];window[v]={};window[v].prototype=document.createElement(p).__proto__;
return window[v]}var j=Prototype.BrowserFeatures,e=Element.Methods.ByTag;if(!a){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(Element.Methods.ByTag,{FORM:Object.clone(Form.Methods),INPUT:Object.clone(Form.Element.Methods),SELECT:Object.clone(Form.Element.Methods),TEXTAREA:Object.clone(Form.Element.Methods)})}if(arguments.length==2){var q=a;a=arguments[1]}if(q)q.constructor==Array?q.each(c):c(q);else Object.extend(Element.Methods,a||{});if(j.ElementExtensions){d(Element.Methods,
HTMLElement.prototype);d(Element.Methods.Simulated,HTMLElement.prototype,true)}if(j.SpecificElementExtensions)for(var t in Element.Methods.ByTag){j=g(t);typeof j!="undefined"&&d(e[t],j.prototype)}Object.extend(Element,Element.Methods);delete Element.ByTag};var Toggle={display:Element.toggle};Abstract.Insertion=function(a){this.adjacency=a};
Abstract.Insertion.prototype={initialize:function(a,c){this.element=$(a);this.content=c.stripScripts();if(this.adjacency&&this.element.insertAdjacentHTML)try{this.element.insertAdjacentHTML(this.adjacency,this.content)}catch(d){if(["TBODY","TR"].include(this.element.tagName.toUpperCase()))this.insertContent(this.contentFromAnonymousTable());else throw d;}else{this.range=this.element.ownerDocument.createRange();this.initializeRange&&this.initializeRange();this.insertContent([this.range.createContextualFragment(this.content)])}setTimeout(function(){c.evalScripts()},
10)},contentFromAnonymousTable:function(){var a=document.createElement("div");a.innerHTML="<table><tbody>"+this.content+"</tbody></table>";return $A(a.childNodes[0].childNodes[0].childNodes)}};var Insertion={};Insertion.Before=Class.create();Insertion.Before.prototype=Object.extend(new Abstract.Insertion("beforeBegin"),{initializeRange:function(){this.range.setStartBefore(this.element)},insertContent:function(a){a.each(function(c){this.element.parentNode.insertBefore(c,this.element)}.bind(this))}});
Insertion.Top=Class.create();Insertion.Top.prototype=Object.extend(new Abstract.Insertion("afterBegin"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(true)},insertContent:function(a){a.reverse(false).each(function(c){this.element.insertBefore(c,this.element.firstChild)}.bind(this))}});Insertion.Bottom=Class.create();
Insertion.Bottom.prototype=Object.extend(new Abstract.Insertion("beforeEnd"),{initializeRange:function(){this.range.selectNodeContents(this.element);this.range.collapse(this.element)},insertContent:function(a){a.each(function(c){this.element.appendChild(c)}.bind(this))}});Insertion.After=Class.create();
Insertion.After.prototype=Object.extend(new Abstract.Insertion("afterEnd"),{initializeRange:function(){this.range.setStartAfter(this.element)},insertContent:function(a){a.each(function(c){this.element.parentNode.insertBefore(c,this.element.nextSibling)}.bind(this))}});Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(a){this.element=$(a)},_each:function(a){this.element.className.split(/\s+/).select(function(c){return c.length>0})._each(a)},set:function(a){this.element.className=a},add:function(a){this.include(a)||this.set($A(this).concat(a).join(" "))},remove:function(a){this.include(a)&&this.set($A(this).without(a).join(" "))},toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);var Selector=Class.create();
Selector.prototype={initialize:function(a){this.expression=a.strip();this.compileMatcher()},compileMatcher:function(){if(Prototype.BrowserFeatures.XPath&&!/\[[\w-]*?:/.test(this.expression))return this.compileXPathMatcher();var a=this.expression,c=Selector.patterns,d=Selector.criteria,g,j;if(Selector._cache[a])this.matcher=Selector._cache[a];else{for(this.matcher=["this.matcher = function(root) {","var r = root, h = Selector.handlers, c = false, n;"];a&&g!=a&&/\S/.test(a);){g=a;for(var e in c){j=
c[e];if(j=a.match(j)){this.matcher.push(typeof d[e]=="function"?d[e](j):(new Template(d[e])).evaluate(j));a=a.replace(j[0],"");break}}}this.matcher.push("return h.unique(n);\n}");eval(this.matcher.join("\n"));Selector._cache[this.expression]=this.matcher}},compileXPathMatcher:function(){var a=this.expression,c=Selector.patterns,d=Selector.xpath,g,j;if(Selector._cache[a])this.xpath=Selector._cache[a];else{for(this.matcher=[".//*"];a&&g!=a&&/\S/.test(a);){g=a;for(var e in c)if(j=a.match(c[e])){this.matcher.push(typeof d[e]==
"function"?d[e](j):(new Template(d[e])).evaluate(j));a=a.replace(j[0],"");break}}this.xpath=this.matcher.join("");Selector._cache[this.expression]=this.xpath}},findElements:function(a){a=a||document;if(this.xpath)return document._getElementsByXPath(this.xpath,a);return this.matcher(a)},match:function(a){return this.findElements(document).include(a)},toString:function(){return this.expression},inspect:function(){return"#<Selector:"+this.expression.inspect()+">"}};
Object.extend(Selector,{_cache:{},xpath:{descendant:"//*",child:"/*",adjacent:"/following-sibling::*[1]",laterSibling:"/following-sibling::*",tagName:function(a){if(a[1]=="*")return"";return"[local-name()='"+a[1].toLowerCase()+"' or local-name()='"+a[1].toUpperCase()+"']"},className:"[contains(concat(' ', @class, ' '), ' #{1} ')]",id:"[@id='#{1}']",attrPresence:"[@#{1}]",attr:function(a){a[3]=a[5]||a[6];return(new Template(Selector.xpath.operators[a[2]])).evaluate(a)},pseudo:function(a){var c=Selector.xpath.pseudos[a[1]];
if(!c)return"";if(typeof c==="function")return c(a);return(new Template(Selector.xpath.pseudos[a[1]])).evaluate(a)},operators:{"=":"[@#{1}='#{3}']","!=":"[@#{1}!='#{3}']","^=":"[starts-with(@#{1}, '#{3}')]","$=":"[substring(@#{1}, (string-length(@#{1}) - string-length('#{3}') + 1))='#{3}']","*=":"[contains(@#{1}, '#{3}')]","~=":"[contains(concat(' ', @#{1}, ' '), ' #{3} ')]","|=":"[contains(concat('-', @#{1}, '-'), '-#{3}-')]"},pseudos:{"first-child":"[not(preceding-sibling::*)]","last-child":"[not(following-sibling::*)]",
"only-child":"[not(preceding-sibling::* or following-sibling::*)]",empty:"[count(*) = 0 and (count(text()) = 0 or translate(text(), ' \t\r\n', '') = '')]",checked:"[@checked]",disabled:"[@disabled]",enabled:"[not(@disabled)]",not:function(a){for(var c=a[6],d=Selector.patterns,g=Selector.xpath,j,e,q=[];c&&j!=c&&/\S/.test(c);){j=c;for(var t in d)if(a=c.match(d[t])){e=typeof g[t]=="function"?g[t](a):(new Template(g[t])).evaluate(a);q.push("("+e.substring(1,e.length-1)+")");c=c.replace(a[0],"");break}}return"[not("+
q.join(" and ")+")]"},"nth-child":function(a){return Selector.xpath.pseudos.nth("(count(./preceding-sibling::*) + 1) ",a)},"nth-last-child":function(a){return Selector.xpath.pseudos.nth("(count(./following-sibling::*) + 1) ",a)},"nth-of-type":function(a){return Selector.xpath.pseudos.nth("position() ",a)},"nth-last-of-type":function(a){return Selector.xpath.pseudos.nth("(last() + 1 - position()) ",a)},"first-of-type":function(a){a[6]="1";return Selector.xpath.pseudos["nth-of-type"](a)},"last-of-type":function(a){a[6]=
"1";return Selector.xpath.pseudos["nth-last-of-type"](a)},"only-of-type":function(a){var c=Selector.xpath.pseudos;return c["first-of-type"](a)+c["last-of-type"](a)},nth:function(a,c){var d,g=c[6];if(g=="even")g="2n+0";if(g=="odd")g="2n+1";if(d=g.match(/^(\d+)$/))return"["+a+"= "+d[1]+"]";if(d=g.match(/^(-?\d*)?n(([+-])(\d+))?/)){if(d[1]=="-")d[1]=-1;g=d[1]?Number(d[1]):1;d=d[2]?Number(d[2]):0;return(new Template("[((#{fragment} - #{b}) mod #{a} = 0) and ((#{fragment} - #{b}) div #{a} >= 0)]")).evaluate({fragment:a,
a:g,b:d})}}}},criteria:{tagName:'n = h.tagName(n, r, "#{1}", c);   c = false;',className:'n = h.className(n, r, "#{1}", c); c = false;',id:'n = h.id(n, r, "#{1}", c);        c = false;',attrPresence:'n = h.attrPresence(n, r, "#{1}"); c = false;',attr:function(a){a[3]=a[5]||a[6];return(new Template('n = h.attr(n, r, "#{1}", "#{3}", "#{2}"); c = false;')).evaluate(a)},pseudo:function(a){if(a[6])a[6]=a[6].replace(/"/g,'\\"');return(new Template('n = h.pseudo(n, "#{1}", "#{6}", r, c); c = false;')).evaluate(a)},
descendant:'c = "descendant";',child:'c = "child";',adjacent:'c = "adjacent";',laterSibling:'c = "laterSibling";'},patterns:{laterSibling:/^\s*~\s*/,child:/^\s*>\s*/,adjacent:/^\s*\+\s*/,descendant:/^\s/,tagName:/^\s*(\*|[\w\-]+)(\b|$)?/,id:/^#([\w\-\*]+)(\b|$)/,className:/^\.([\w\-\*]+)(\b|$)/,pseudo:/^:((first|last|nth|nth-last|only)(-child|-of-type)|empty|checked|(en|dis)abled|not)(\((.*?)\))?(\b|$|\s|(?=:))/,attrPresence:/^\[([\w]+)\]/,attr:/\[((?:[\w-]*:)?[\w-]+)\s*(?:([!^$*~|]?=)\s*((['"])([^\]]*?)\4|([^'"][^\]]*?)))?\]/},
handlers:{concat:function(a,c){for(var d=0,g;g=c[d];d++)a.push(g);return a},mark:function(a){for(var c=0,d;d=a[c];c++)d._counted=true;return a},unmark:function(a){for(var c=0,d;d=a[c];c++)d._counted=undefined;return a},index:function(a,c,d){a._counted=true;if(c){a=a.childNodes;c=a.length-1;for(var g=1;c>=0;c--){node=a[c];if(node.nodeType==1&&(!d||node._counted))node.nodeIndex=g++}}else{c=0;g=1;for(a=a.childNodes;node=a[c];c++)if(node.nodeType==1&&(!d||node._counted))node.nodeIndex=g++}},unique:function(a){if(a.length==
0)return a;for(var c=[],d,g=0,j=a.length;g<j;g++)if(!(d=a[g])._counted){d._counted=true;c.push(Element.extend(d))}return Selector.handlers.unmark(c)},descendant:function(a){for(var c=Selector.handlers,d=0,g=[],j;j=a[d];d++)c.concat(g,j.getElementsByTagName("*"));return g},child:function(a){for(var c=0,d=[],g;g=a[c];c++)for(var j=0,e;e=g.childNodes[j];j++)e.nodeType==1&&e.tagName!="!"&&d.push(e);return d},adjacent:function(a){for(var c=0,d=[],g;g=a[c];c++)(g=this.nextElementSibling(g))&&d.push(g);
return d},laterSibling:function(a){for(var c=Selector.handlers,d=0,g=[],j;j=a[d];d++)c.concat(g,Element.nextSiblings(j));return g},nextElementSibling:function(a){for(;a=a.nextSibling;)if(a.nodeType==1)return a;return null},previousElementSibling:function(a){for(;a=a.previousSibling;)if(a.nodeType==1)return a;return null},tagName:function(a,c,d,g){d=d.toUpperCase();var j=[],e=Selector.handlers;if(a){if(g){if(g=="descendant"){for(c=0;g=a[c];c++)e.concat(j,g.getElementsByTagName(d));return j}else a=
this[g](a);if(d=="*")return a}for(c=0;g=a[c];c++)g.tagName.toUpperCase()==d&&j.push(g);return j}else return c.getElementsByTagName(d)},id:function(a,c,d,g){d=$(d);var j=Selector.handlers;if(!a&&c==document)return d?[d]:[];if(a){if(g)if(g=="child")for(c=0;g=a[c];c++){if(d.parentNode==g)return[d]}else if(g=="descendant")for(c=0;g=a[c];c++){if(Element.descendantOf(d,g))return[d]}else if(g=="adjacent")for(c=0;g=a[c];c++){if(Selector.handlers.previousElementSibling(d)==g)return[d]}else a=j[g](a);for(c=
0;g=a[c];c++)if(g==d)return[d];return[]}return d&&Element.descendantOf(d,c)?[d]:[]},className:function(a,c,d,g){if(a&&g)a=this[g](a);return Selector.handlers.byClassName(a,c,d)},byClassName:function(a,c,d){a||(a=Selector.handlers.descendant([c]));c=" "+d+" ";for(var g=0,j=[],e,q;e=a[g];g++){q=e.className;if(q.length!=0)if(q==d||(" "+q+" ").include(c))j.push(e)}return j},attrPresence:function(a,c,d){c=[];for(var g=0,j;j=a[g];g++)Element.hasAttribute(j,d)&&c.push(j);return c},attr:function(a,c,d,g,
j){a||(a=c.getElementsByTagName("*"));c=Selector.operators[j];j=[];for(var e=0,q;q=a[e];e++){var t=Element.readAttribute(q,d);t!==null&&c(t,g)&&j.push(q)}return j},pseudo:function(a,c,d,g,j){if(a&&j)a=this[j](a);a||(a=g.getElementsByTagName("*"));return Selector.pseudos[c](a,d,g)}},pseudos:{"first-child":function(a){for(var c=0,d=[],g;g=a[c];c++)Selector.handlers.previousElementSibling(g)||d.push(g);return d},"last-child":function(a){for(var c=0,d=[],g;g=a[c];c++)Selector.handlers.nextElementSibling(g)||
d.push(g);return d},"only-child":function(a){for(var c=Selector.handlers,d=0,g=[],j;j=a[d];d++)!c.previousElementSibling(j)&&!c.nextElementSibling(j)&&g.push(j);return g},"nth-child":function(a,c,d){return Selector.pseudos.nth(a,c,d)},"nth-last-child":function(a,c,d){return Selector.pseudos.nth(a,c,d,true)},"nth-of-type":function(a,c,d){return Selector.pseudos.nth(a,c,d,false,true)},"nth-last-of-type":function(a,c,d){return Selector.pseudos.nth(a,c,d,true,true)},"first-of-type":function(a,c,d){return Selector.pseudos.nth(a,
"1",d,false,true)},"last-of-type":function(a,c,d){return Selector.pseudos.nth(a,"1",d,true,true)},"only-of-type":function(a,c,d){var g=Selector.pseudos;return g["last-of-type"](g["first-of-type"](a,c,d),c,d)},getIndices:function(a,c,d){if(a==0)return c>0?[c]:[];return $R(1,d).inject([],function(g,j){0==(j-c)%a&&(j-c)/a>=0&&g.push(j);return g})},nth:function(a,c,d,g,j){if(a.length==0)return[];if(c=="even")c="2n+0";if(c=="odd")c="2n+1";d=Selector.handlers;var e=[],q=[],t;d.mark(a);for(var p=0;t=a[p];p++)if(!t.parentNode._counted){d.index(t.parentNode,
g,j);q.push(t.parentNode)}if(c.match(/^\d+$/)){c=Number(c);for(p=0;t=a[p];p++)t.nodeIndex==c&&e.push(t)}else if(t=c.match(/^(-?\d*)?n(([+-])(\d+))?/)){if(t[1]=="-")t[1]=-1;p=t[1]?Number(t[1]):1;t=t[2]?Number(t[2]):0;c=Selector.pseudos.getIndices(p,t,a.length);p=0;for(g=c.length;t=a[p];p++)for(j=0;j<g;j++)t.nodeIndex==c[j]&&e.push(t)}d.unmark(a);d.unmark(q);return e},empty:function(a){for(var c=0,d=[],g;g=a[c];c++)g.tagName=="!"||g.firstChild&&!g.innerHTML.match(/^\s*$/)||d.push(g);return d},not:function(a,
c,d){var g=Selector.handlers;c=(new Selector(c)).findElements(d);g.mark(c);d=0;for(var j=[],e;e=a[d];d++)e._counted||j.push(e);g.unmark(c);return j},enabled:function(a){for(var c=0,d=[],g;g=a[c];c++)g.disabled||d.push(g);return d},disabled:function(a){for(var c=0,d=[],g;g=a[c];c++)g.disabled&&d.push(g);return d},checked:function(a){for(var c=0,d=[],g;g=a[c];c++)g.checked&&d.push(g);return d}},operators:{"=":function(a,c){return a==c},"!=":function(a,c){return a!=c},"^=":function(a,c){return a.startsWith(c)},
"$=":function(a,c){return a.endsWith(c)},"*=":function(a,c){return a.include(c)},"~=":function(a,c){return(" "+a+" ").include(" "+c+" ")},"|=":function(a,c){return("-"+a.toUpperCase()+"-").include("-"+c.toUpperCase()+"-")}},matchElements:function(a,c){var d=(new Selector(c)).findElements(),g=Selector.handlers;g.mark(d);for(var j=0,e=[],q;q=a[j];j++)q._counted&&e.push(q);g.unmark(d);return e},findElement:function(a,c,d){if(typeof c=="number"){d=c;c=false}return Selector.matchElements(a,c||"*")[d||
0]},findChildElements:function(a,c){var d=c.join(",");c=[];d.scan(/(([\w#:.~>+()\s-]+|\*|\[.*?\])+)\s*(,|$)/,function(t){c.push(t[1].strip())});d=[];for(var g=Selector.handlers,j=0,e=c.length,q;j<e;j++){q=new Selector(c[j].strip());g.concat(d,q.findElements(a))}return e>1?g.unique(d):d}});function $$(){return Selector.findChildElements(document,$A(arguments))}
var Form={reset:function(a){$(a).reset();return a},serializeElements:function(a,c){var d=a.inject({},function(g,j){if(!j.disabled&&j.name){var e=j.name,q=$(j).getValue();if(q!=null)if(e in g){if(g[e].constructor!=Array)g[e]=[g[e]];g[e].push(q)}else g[e]=q}return g});return c?d:Hash.toQueryString(d)}};
Form.Methods={serialize:function(a,c){return Form.serializeElements(Form.getElements(a),c)},getElements:function(a){return $A($(a).getElementsByTagName("*")).inject([],function(c,d){Form.Element.Serializers[d.tagName.toLowerCase()]&&c.push(Element.extend(d));return c})},getInputs:function(a,c,d){a=$(a);a=a.getElementsByTagName("input");if(!c&&!d)return $A(a).map(Element.extend);for(var g=0,j=[],e=a.length;g<e;g++){var q=a[g];c&&q.type!=c||d&&q.name!=d||j.push(Element.extend(q))}return j},disable:function(a){a=
$(a);Form.getElements(a).invoke("disable");return a},enable:function(a){a=$(a);Form.getElements(a).invoke("enable");return a},findFirstElement:function(a){return $(a).getElements().find(function(c){return c.type!="hidden"&&!c.disabled&&["input","select","textarea"].include(c.tagName.toLowerCase())})},focusFirstElement:function(a){a=$(a);a.findFirstElement().activate();return a},request:function(a,c){a=$(a);c=Object.clone(c||{});var d=c.parameters;c.parameters=a.serialize(true);if(d){if(typeof d==
"string")d=d.toQueryParams();Object.extend(c.parameters,d)}if(a.hasAttribute("method")&&!c.method)c.method=a.method;return new Ajax.Request(a.readAttribute("action"),c)}};Form.Element={focus:function(a){$(a).focus();return a},select:function(a){$(a).select();return a}};
Form.Element.Methods={serialize:function(a){a=$(a);if(!a.disabled&&a.name){var c=a.getValue();if(c!=undefined){var d={};d[a.name]=c;return Hash.toQueryString(d)}}return""},getValue:function(a){a=$(a);var c=a.tagName.toLowerCase();return Form.Element.Serializers[c](a)},clear:function(a){$(a).value="";return a},present:function(a){return $(a).value!=""},activate:function(a){a=$(a);try{a.focus();if(a.select&&(a.tagName.toLowerCase()!="input"||!["button","reset","submit"].include(a.type)))a.select()}catch(c){}return a},
disable:function(a){a=$(a);a.blur();a.disabled=true;return a},enable:function(a){a=$(a);a.disabled=false;return a}};var Field=Form.Element,$F=Form.Element.Methods.getValue;
Form.Element.Serializers={input:function(a){switch(a.type.toLowerCase()){case "checkbox":case "radio":return Form.Element.Serializers.inputSelector(a);default:return Form.Element.Serializers.textarea(a)}},inputSelector:function(a){return a.checked?a.value:null},textarea:function(a){return a.value},select:function(a){return this[a.type=="select-one"?"selectOne":"selectMany"](a)},selectOne:function(a){var c=a.selectedIndex;return c>=0?this.optionValue(a.options[c]):null},selectMany:function(a){var c,
d=a.length;if(!d)return null;var g=0;for(c=[];g<d;g++){var j=a.options[g];j.selected&&c.push(this.optionValue(j))}return c},optionValue:function(a){return Element.extend(a).hasAttribute("value")?a.value:a.text}};Abstract.TimedObserver=function(){};
Abstract.TimedObserver.prototype={initialize:function(a,c,d){this.frequency=c;this.element=$(a);this.callback=d;this.lastValue=this.getValue();this.registerCallback()},registerCallback:function(){setInterval(this.onTimerEvent.bind(this),this.frequency*1E3)},onTimerEvent:function(){var a=this.getValue();if("string"==typeof this.lastValue&&"string"==typeof a?this.lastValue!=a:String(this.lastValue)!=String(a)){this.callback(this.element,a);this.lastValue=a}}};Form.Element.Observer=Class.create();
Form.Element.Observer.prototype=Object.extend(new Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.Observer=Class.create();Form.Observer.prototype=Object.extend(new Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});Abstract.EventObserver=function(){};
Abstract.EventObserver.prototype={initialize:function(a,c){this.element=$(a);this.callback=c;this.lastValue=this.getValue();this.element.tagName.toLowerCase()=="form"?this.registerFormCallbacks():this.registerCallback(this.element)},onElementEvent:function(){var a=this.getValue();if(this.lastValue!=a){this.callback(this.element,a);this.lastValue=a}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback.bind(this))},registerCallback:function(a){if(a.type)switch(a.type.toLowerCase()){case "checkbox":case "radio":Event.observe(a,
"click",this.onElementEvent.bind(this));break;default:Event.observe(a,"change",this.onElementEvent.bind(this));break}}};Form.Element.EventObserver=Class.create();Form.Element.EventObserver.prototype=Object.extend(new Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create();Form.EventObserver.prototype=Object.extend(new Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});if(!window.Event)var Event={};
Object.extend(Event,{KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,element:function(a){return $(a.target||a.srcElement)},isLeftClick:function(a){return a.which&&a.which==1||a.button&&a.button==1},pointerX:function(a){return a.pageX||a.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)},pointerY:function(a){return a.pageY||a.clientY+(document.documentElement.scrollTop||
document.body.scrollTop)},stop:function(a){if(a.preventDefault){a.preventDefault();a.stopPropagation()}else{a.returnValue=false;a.cancelBubble=true}},findElement:function(a,c){for(var d=Event.element(a);d.parentNode&&(!d.tagName||d.tagName.toUpperCase()!=c.toUpperCase());)d=d.parentNode;return d},observers:false,_observeAndCache:function(a,c,d,g){if(!this.observers)this.observers=[];if(a.addEventListener){this.observers.push([a,c,d,g]);a.addEventListener(c,d,g)}else if(a.attachEvent){this.observers.push([a,
c,d,g]);a.attachEvent("on"+c,d)}},unloadCache:function(){if(Event.observers){for(var a=0,c=Event.observers.length;a<c;a++){Event.stopObserving.apply(this,Event.observers[a]);Event.observers[a][0]=null}Event.observers=false}},observe:function(a,c,d,g){a=$(a);g=g||false;if(c=="keypress"&&(Prototype.Browser.WebKit||a.attachEvent))c="keydown";Event._observeAndCache(a,c,d,g)},stopObserving:function(a,c,d,g){a=$(a);g=g||false;if(c=="keypress"&&(Prototype.Browser.WebKit||a.attachEvent))c="keydown";if(a.removeEventListener)a.removeEventListener(c,
d,g);else if(a.detachEvent)try{a.detachEvent("on"+c,d)}catch(j){}}});Prototype.Browser.IE&&Event.observe(window,"unload",Event.unloadCache,false);
var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},realOffset:function(a){var c=0,d=0;do{c+=a.scrollTop||0;d+=a.scrollLeft||0;a=a.parentNode}while(a);return[d,c]},cumulativeOffset:function(a){var c=0,d=0;do{c+=a.offsetTop||0;d+=a.offsetLeft||0;a=a.offsetParent}while(a);return[d,c]},positionedOffset:function(a){var c=
0,d=0;do{c+=a.offsetTop||0;d+=a.offsetLeft||0;if(a=a.offsetParent){if(a.tagName=="BODY")break;var g=Element.getStyle(a,"position");if(g=="relative"||g=="absolute")break}}while(a);return[d,c]},offsetParent:function(a){if(a.offsetParent)return a.offsetParent;if(a==document.body)return a;for(;(a=a.parentNode)&&a!=document.body;)if(Element.getStyle(a,"position")!="static")return a;return document.body},within:function(a,c,d){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(a,c,d);
this.xcomp=c;this.ycomp=d;this.offset=this.cumulativeOffset(a);return d>=this.offset[1]&&d<this.offset[1]+a.offsetHeight&&c>=this.offset[0]&&c<this.offset[0]+a.offsetWidth},withinIncludingScrolloffsets:function(a,c,d){var g=this.realOffset(a);this.xcomp=c+g[0]-this.deltaX;this.ycomp=d+g[1]-this.deltaY;this.offset=this.cumulativeOffset(a);return this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+a.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+a.offsetWidth},overlap:function(a,
c){if(!a)return 0;if(a=="vertical")return(this.offset[1]+c.offsetHeight-this.ycomp)/c.offsetHeight;if(a=="horizontal")return(this.offset[0]+c.offsetWidth-this.xcomp)/c.offsetWidth},page:function(a){var c=0,d=0,g=a;do{c+=g.offsetTop||0;d+=g.offsetLeft||0;if(g.offsetParent==document.body)if(Element.getStyle(g,"position")=="absolute")break}while(g=g.offsetParent);g=a;do if(!window.opera||g.tagName=="BODY"){c-=g.scrollTop||0;d-=g.scrollLeft||0}while(g=g.parentNode);return[d,c]},clone:function(a,c,d){d=
Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},d||{});a=$(a);var g=Position.page(a);c=$(c);var j=[0,0],e=null;if(Element.getStyle(c,"position")=="absolute"){e=Position.offsetParent(c);j=Position.page(e)}if(e==document.body){j[0]-=document.body.offsetLeft;j[1]-=document.body.offsetTop}if(d.setLeft)c.style.left=g[0]-j[0]+d.offsetLeft+"px";if(d.setTop)c.style.top=g[1]-j[1]+d.offsetTop+"px";if(d.setWidth)c.style.width=a.offsetWidth+"px";if(d.setHeight)c.style.height=
a.offsetHeight+"px"},absolutize:function(a){a=$(a);if(a.style.position!="absolute"){Position.prepare();var c=Position.positionedOffset(a),d=c[1];c=c[0];var g=a.clientWidth,j=a.clientHeight;a._originalLeft=c-parseFloat(a.style.left||0);a._originalTop=d-parseFloat(a.style.top||0);a._originalWidth=a.style.width;a._originalHeight=a.style.height;a.style.position="absolute";a.style.top=d+"px";a.style.left=c+"px";a.style.width=g+"px";a.style.height=j+"px"}},relativize:function(a){a=$(a);if(a.style.position!=
"relative"){Position.prepare();a.style.position="relative";var c=parseFloat(a.style.top||0)-(a._originalTop||0),d=parseFloat(a.style.left||0)-(a._originalLeft||0);a.style.top=c+"px";a.style.left=d+"px";a.style.height=a._originalHeight;a.style.width=a._originalWidth}}};
if(Prototype.Browser.WebKit)Position.cumulativeOffset=function(a){var c=0,d=0;do{c+=a.offsetTop||0;d+=a.offsetLeft||0;if(a.offsetParent==document.body)if(Element.getStyle(a,"position")=="absolute")break;a=a.offsetParent}while(a);return[d,c]};Element.addMethods();var Scriptaculous={Version:"1.7.1_beta3",require:function(a){document.write('<script type="text/javascript" src="'+a+'"><\/script>')},REQUIRED_PROTOTYPE:"1.5.1",load:function(){function a(c){c=c.split(".");return parseInt(c[0])*1E5+parseInt(c[1])*1E3+parseInt(c[2])}if(typeof Prototype=="undefined"||typeof Element=="undefined"||typeof Element.Methods=="undefined"||a(Prototype.Version)<a(Scriptaculous.REQUIRED_PROTOTYPE))throw"script.aculo.us requires the Prototype JavaScript framework >= "+Scriptaculous.REQUIRED_PROTOTYPE;
$A(document.getElementsByTagName("script")).findAll(function(c){return c.src&&c.src.match(/scriptaculous\.js(\?.*)?$/)}).each(function(c){var d=c.src.replace(/scriptaculous\.js(\?.*)?$/,"");c=c.src.match(/\?.*load=([a-z,]*)/);(c?c[1]:"builder,effects,dragdrop,controls,slider,sound,extensions").split(",").each(function(g){Scriptaculous.require(d+g+".js")})})}};Scriptaculous.load();var pdesc_value=null,MAX_PDESC_LENGTH=50;function el(a){return document.getElementById(a)}function initScratchPlayer(){show($("projectload"))}function initProjectNotes(){var a=document.getElementById("pdesc"),c=document.getElementById("toggleNotes");if(pdesc_value==null)pdesc_value=a.innerHTML;if(a.innerHTML.length>MAX_PDESC_LENGTH){a.innerHTML=a.innerHTML.substr(0,MAX_PDESC_LENGTH)+"...";c.innerHTML="more &raquo;&raquo;"}else c.innerHTML=""}
function toggleProjectNotes(){var a=document.getElementById("pdesc"),c=document.getElementById("toggleNotes");if(a.innerHTML!=pdesc_value){a.innerHTML=pdesc_value;c.innerHTML="&laquo;&laquo; less"}else if(a.innerHTML.length>MAX_PDESC_LENGTH){a.innerHTML=a.innerHTML.substr(0,MAX_PDESC_LENGTH)+"...";c.innerHTML="more &raquo;&raquo;"}}function activateElementScroll(a){$(a).style.overflow="auto"}function deactivateElementScroll(a){$(a).style.overflow="hidden"}
function showProject(a){new Ajax.Updater("projectwrapper",a+"/load",{onComplete:function(){hide($("downloadjava"));show($("projectload"))},asynchronous:true})}function showThemesOld(a,c){new Ajax.Updater("themebox","/galleries/submitprojects",{onComplete:function(){showThemeBox(a,c)},asynchronous:true})}function setCookie(a,c,d){if(d){var g=new Date;g.setTime(g.getTime()+d*24*36E5);d="; expires="+g.toGMTString()}else d="";document.cookie=a+"="+c+d+"; path=/"}
function readCookie(a){a=a+"=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var g=c[d];g.charAt(0)==" ";)g=g.substring(1,g.length);if(g.indexOf(a)==0)return g.substring(a.length,g.length)}return null}function deleteCoookiesWithPrefix(a){for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var g=c[d];g.charAt(0)==" ";)g=g.substring(1,g.length);g.indexOf(a)==0&&deleteCookie(g.substring(0,g.indexOf("=")))}}
function removeProjectSelections(){deleteCoookiesWithPrefix("scratchr_projectselections")}function deleteCookie(a){setCookie(a,"",-1)}function selectProject(a){setCookie("scratchr_projectselections_"+a,1,1)}function deselectProject(a){deleteCookie("scratchr_projectselections_"+a)}function toggleProjectSelection(a){a="scratchr_projectselections_"+a;readCookie(a)?deleteCookie(a):setCookie(a,1,1)}function toggle(){return false}
function toggleMore(a,c){var d=document;d=d.all?d.all[a]:d.getElementById(a);if(!d.i)d.i=0;d.style.display=d.i++%2?"none":"block";c.innerHTML=d.i%2?"See less":"See more";return false}function hide(a){a.style.display="none"}function show(a){a.style.display="block"}function findPos(a){var c=curtop=0;if(a.id){c=a.offsetLeft;for(curtop=a.offsetTop;a=a.offsetParent;){c+=a.offsetLeft;curtop+=a.offsetTop}}return[c,curtop]}
function toggleActive(a,c){var d=c+"_"+a,g=document.getElementById(c);if(g)if(actionInput=document.getElementById(d))g.removeChild(actionInput);else{var j=document.createElement("input");j.setAttribute("id",d);j.setAttribute("name",d);j.setAttribute("value",d);j.setAttribute("type","hidden");g.appendChild(j)}}
function populateUserList(){var a=el("auto_query").value.toLowerCase().replace(/^\s+/,""),c=el("userlist");a=RegExp("^"+a,"i");for(var d=c.childNodes.length,g=0;g<d;g++){var j=c.childNodes[g];if(j){var e=j.getAttribute("name");j.style.display="";j.style.display=a.exec(e)?"":"none"}}}
function addPendingInvite(a,c){var d=el("userlist"),g=el("invitelist"),j=a.getAttribute("uid"),e=a.getAttribute("uname"),q=el("uimg_"+j).src;d.removeChild(c);d=document.createElement("li");d.id="puid_"+j;d.innerHTML='<input type="hidden" name="'+j+'"><a href="/users/'+e+'"><img id="puimg_'+j+'" src="'+q+'" width="28" height="28">'+e+'</a>&nbsp;<a uid="'+j+'" uname="'+e+'" href="#"  onclick="removePendingInvite(this, el(\'puid_'+j+"')); return false;\">(x)</a></li>";g.insertBefore(d,g.firstChild)}
function removePendingInvite(a,c){var d=a.getAttribute("uid"),g=a.getAttribute("uname");insertIntoUserList(d,g);el("invitelist").removeChild(c)}
function insertIntoUserList(a,c){var d=el("userlist"),g=el("puimg_"+a).src,j=document.createElement("li");j.id="uid_"+a;j.name=c;j.setAttribute("name",c);j.innerHTML='<input uid="'+a+'" uname="'+c+'" type="checkbox" onclick="addPendingInvite(this, el(\'uid_'+a+'\'))"><a href="/users/'+c+'"><img id="uimg_'+a+'" src="'+g+'" width="28" height="28">'+c+"</a></li>";d.insertBefore(j,d.firstChild)}var logincontainer=document.getElementById("logincontainer"),toggled=false;
function showLogin(){if(toggled==false){Effect.Appear("logincontainer",{duration:0.4,from:1.0E-4,to:0.9999});setTimeout('document.getElementById("UserInput").focus()',300);toggled=true}else{Effect.Fade("logincontainer",{duration:0.4,from:0.9999,to:0});toggled=false}return false}
function hideUserCountryDiv(a){var c=document.getElementById("userCountryDiv");typeof a!=="undefined"?hide(c):Effect.Fade("userCountryDiv",{duration:0.4,from:0.9999,to:0});setCookie("country_welcomed","1",365);return false}function hideAnnouncement(){Effect.Fade("announcement",{duration:0.4,from:0.9999,to:0});toggled=false;setCookie("announcement","hide",15);return false}
function updateNotificationsCounter(a){var c=document.getElementById("notificationscount"),d=document.getElementById("notificationcontainer"),g=parseInt(c.innerHTML);g-=1;if(typeof a!=="undefined"&&a||g==0){d.style.display="none";document.getElementById("messages").style.display="none";document.getElementById("hide_all_notification").style.display="none"}else c.innerHTML=g.toString()+" messages";return true}
function tagsubmit_ajax(a){if((document.layers?a.which:event.keyCode)==13){document.getElementById("tag_submit").click();return false}return true}function incrementNewShariableCount(){var a=document.getElementById("newShariableCount"),c=document.getElementById("newShariableLink");if(a!=null){if(a.innerHTML==0)c.style.display="block";a.innerHTML++}return true}function showMenu(a){a=document.getElementById(a);a.style.display=a.style.display=="none"||a.style.display==""?"block":"none"}
function swapImage(a){if(a==0)document.arrow_profile.src="img/arrow_hover.png";else if(a==1)document.arrow_profile.src="img/arrow_select.png";else if(a==2)document.arrow_profile.src="img/arrow.png"};var loadingImage="/img/loading.gif";function checkUser(a){if(a==1){alert("Invalid action - your user account has been locked");return false}else return true}function checkAll(a,c){return checkLogin(a)&&checkUser(c)}function getPageScroll(){var a;if(self.pageYOffset)a=self.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)a=document.documentElement.scrollTop;else if(document.body)a=document.body.scrollTop;return arrayPageScroll=Array("",a)}
function getPageSize(){var a,c;if(window.innerHeight&&window.scrollMaxY){a=document.body.scrollWidth;c=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){a=document.body.scrollWidth;c=document.body.scrollHeight}else{a=document.body.offsetWidth;c=document.body.offsetHeight}var d,g;if(self.innerHeight){d=self.innerWidth;g=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){d=document.documentElement.clientWidth;g=
document.documentElement.clientHeight}else if(document.body){d=document.body.clientWidth;g=document.body.clientHeight}pageHeight=c<g?g:c;pageWidth=a<d?d:a;return arrayPageSize=Array(pageWidth,pageHeight,d,g)}
function initHanbox(){initLinks();var a=document.getElementById("overlay"),c=document.getElementById("loadingDiv"),d=document.getElementsByTagName("body").item(0),g=new Image;g.onload=function(){var j=document.createElement("img");j.src=loadingImage;j.setAttribute("id","loadingImage");j.style.position="absolute";j.style.zIndex="6000";c.appendChild(j);g.onload=function(){};return false};g.src=loadingImage;a.setAttribute("id","overlay");a.onclick=function(){hideHanbox();return false};a.style.display=
"none";a.style.position="absolute";a.style.top="0";a.style.left="0";a.style.zIndex="90";a.style.width="100%";d.appendChild(a);a=document.getElementById("addbox");if(a!=null){a.setAttribute("id","addbox");a.style.display="none";a.style.position="absolute";a.style.zIndex="100"}a=document.getElementById("removebox");if(a!=null){a.setAttribute("id","removebox");a.style.display="none";a.style.position="absolute";a.style.zIndex="100"}}
function preloadHanbox(){getPageSize();getPageScroll();document.getElementById("loadingImage");document.getElementById("loadingDiv");setTimeout("showAddbox()",4E3)}
function showAddbox(){var a=document.getElementById("overlay"),c=document.getElementById("addbox");document.getElementById("loadingImage");var d=document.getElementById("loadingDiv"),g=getPageSize(),j=getPageScroll();a.style.height=g[1]+"px";a.style.display="block";a=g[3]/2;var e=g[2]/2;j=j[1]+(g[3]-35-a)/2;g=(g[0]-20-e)/2;c.style.display="block";c.style.top=j<0?"0px":j+"px";c.style.left=g<0?"0px":g+"px";c.style.width=e+"px";c.style.height=a+"px";d.style.display="none"}
function showRemovebox(){var a=document.getElementById("overlay"),c=document.getElementById("removebox"),d=getPageSize(),g=getPageScroll();a.style.height=d[1]+"px";a.style.display="block";a=d[3]/2;var j=d[2]/2;g=g[1]+(d[3]-35-a)/2;d=(d[0]-20-j)/2;c.style.display="block";c.style.top=g<0?"0px":g+"px";c.style.left=d<0?"0px":d+"px";c.style.width=j+"px";c.style.height=a+"px"}
function initLinks(){var a=document.getElementById("addprojectmember"),c=document.getElementById("removeprojectmember"),d=document.getElementById("addbutton"),g=document.getElementById("removebutton");if(a!=null){a.onclick=function(){preloadHanbox();return false};c.onclick=function(){showRemovebox();return false};d.onclick=function(){hideHanbox();return false};g.onclick=function(){hideHanbox();return false}}}
function hideHanbox(){objOverlay=document.getElementById("overlay");objAddBox=document.getElementById("addbox");objRemoveBox=document.getElementById("removebox");objOverlay.style.display="none";objAddBox.style.display="none";objRemoveBox.style.display="none";window.location.reload()}function addLoadEvent(a){var c=window.onload;window.onload=typeof window.onload!="function"?a:function(){c();a()}}addLoadEvent(initHanbox);function hideComment(a){a=a.toString();document.getElementById(a).style.innerHTML="none";return true}
function showReplyBox(a,c){var d=document.getElementById("reply_to_"+a),g=document.getElementById("gallery_comment_reply_frame_"+a);document.getElementById(a);var j=document.getElementById("reply_hide_link_"+a),e=document.getElementById("reply_to_"+a),q=document.getElementById("view_hide_link_"+a),t=document.getElementById("reply_list_"+a),p=document.getElementById("gallery_comment_reply_input_"+a),v=document.getElementById("view_hide_link_frame_"+a);if(d.style.display=="block"){d.style.display="none";
g.style.display="none";e.style.display="none";if(j!=null)j.innerHTML="reply"}else{d.style.display="block";g.style.display="block";e.style.display="block";if(j!=null)j.innerHTML="hide"}d=document.getElementById("gallery_comment_reply_submit_"+a);if(c){p.value="";t.style.display="block";q.innerHTML="hide replies";d=document.getElementById("gallery_comment_reply_submit_"+a);d.disabled=false;if(v.style.display!="inline")v.style.display="inline"}}
function showReplyList(a){var c=document.getElementById("view_hide_link_"+a);a=document.getElementById("reply_list_"+a);if(a.style.display=="block"){a.style.display="none";c.innerHTML="view all replies"}else{a.style.display="block";c.innerHTML="hide replies"}}function hideReplyList(a){var c=document.getElementById("view_hide_link_"+a);document.getElementById("reply_list_"+a).style.display="none";c.innerHTML="view replies"}
function hideReplyBox(a){var c=document.getElementById("reply_to_"+a),d=document.getElementById("gallery_comment_reply_frame_"+a);document.getElementById(a);a=document.getElementById("reply_hide_link_"+a);c.style.display="none";d.style.display="none";topframe.style.display="none";a.innerHTML="reply"}function enableReply(a){document.getElementById("gallery_comment_reply_submit_"+a).disabled=false}function disableReply(a){document.getElementById("gallery_comment_reply_submit_"+a).disabled=true}
function getAbsoluteY(a){for(var c=0;a!=null;){c+=a.offsetTop;a=a.offsetParent}return c}function getAbsoluteX(a){for(var c=0;a!=null;){c+=a.offsetLeft;a=a.offsetParent}return c};Event.observe(window,"load",init);function init(){makeItCount("pcomment_textarea",500);makeItCount("tcomment_textarea",500)}
function charCounter(a,c,d){$("counter-"+a)||$(a).insert({after:'<div id="counter-'+a+'"></div>'});if($F(a).length>=c){if(d)$(a).value=$F(a).substring(0,c);$("counter-"+a).addClassName("charcount-limit");$("counter-"+a).removeClassName("charcount-safe")}else{$("counter-"+a).removeClassName("charcount-limit");$("counter-"+a).addClassName("charcount-safe")}$("counter-"+a).update($F(a).length+"/"+c)}
function makeItCount(a,c,d){if(d==null)d=true;if($(a)){Event.observe($(a),"keyup",function(){charCounter(a,c,d)},false);Event.observe($(a),"keydown",function(){charCounter(a,c,d)},false);charCounter(a,c,d)}}function makeItCountProject(a,c,d){if(d==null)d=true;var g="project_comment_reply_input_"+a;if(a=document.getElementById(g)){Event.observe(a,"keyup",function(){charCounter(g,c,d)},false);Event.observe(a,"keydown",function(){charCounter(g,c,d)},false);charCounter(g,c,d)}}
function addProjectCharCounter(a){var c="project_comment_reply_input_"+a;if(a=document.getElementById(c)){Event.observe(a,"keyup",function(){charCounterPro(c,500,true)},false);Event.observe(a,"keydown",function(){charCounterPro(c,500,true)},false);charCounterPro(c,500,true)}}
function addGalleryCharCounter(a){var c="gallery_comment_reply_input_"+a;if(a=document.getElementById(c)){Event.observe(a,"keyup",function(){charCounterPro(c,500,true)},false);Event.observe(a,"keydown",function(){charCounterPro(c,500,true)},false);charCounterPro(c,500,true)}}function insertAfter(a,c,d){a.insertBefore(c,d.nextSibling)}
function charCounterPro(a,c,d){if(!$("counter-"+a)){var g=$(a).parentNode,j=$(a),e=document.createElement("div");e.id="counter-"+a;insertAfter(g,e,j)}if($F(a).length>=c){if(d)$(a).value=$F(a).substring(0,c);$("counter-"+a).addClassName("charcount-limit");$("counter-"+a).removeClassName("charcount-safe")}else{$("counter-"+a).removeClassName("charcount-limit");$("counter-"+a).addClassName("charcount-safe")}d=$("counter-"+a);a=$F(a).length+"/"+c;setHTML(d,a)}
function setHTML(a,c){a.firstChild&&a.removeChild(a.firstChild);a.appendChild(document.createTextNode(c))};(function(){function a(b,f){f.src?e.ajax({url:f.src,async:false,dataType:"script"}):e.globalEval(f.text||f.textContent||f.innerHTML||"");f.parentNode&&f.parentNode.removeChild(f)}function c(b,f){return b[0]&&parseInt(e.curCSS(b[0],f,true),10)||0}function d(){if(!L){L=true;document.addEventListener&&!e.browser.opera&&document.addEventListener("DOMContentLoaded",e.ready,false);e.browser.msie&&window==top&&function(){if(!e.isReady){try{document.documentElement.doScroll("left")}catch(f){setTimeout(arguments.callee,
0);return}e.ready()}}();e.browser.opera&&document.addEventListener("DOMContentLoaded",function(){if(!e.isReady){for(var f=0;f<document.styleSheets.length;f++)if(document.styleSheets[f].disabled){setTimeout(arguments.callee,0);return}e.ready()}},false);if(e.browser.safari){var b;(function(){if(!e.isReady)if(document.readyState!="loaded"&&document.readyState!="complete")setTimeout(arguments.callee,0);else{if(b===p)b=e("style, link[rel=stylesheet]").length;document.styleSheets.length!=b?setTimeout(arguments.callee,
0):e.ready()}})()}e.event.add(window,"load",e.ready)}}var g=window.jQuery,j=window.$,e=window.jQuery=window.$=function(b,f){return new e.fn.init(b,f)},q=/^[^<]*(<(.|\s)+>)[^>]*$|^#(\w+)$/,t=/^.[^:#\[\.]*$/,p;e.fn=e.prototype={init:function(b,f){b=b||document;if(b.nodeType){this[0]=b;this.length=1;return this}if(typeof b=="string"){var h=q.exec(b);if(h&&(h[1]||!f))if(h[1])b=e.clean([h[1]],f);else{var i=document.getElementById(h[3]);if(i){if(i.id!=h[3])return e().find(b);return e(i)}b=[]}else return e(f).find(b)}else if(e.isFunction(b))return e(document)[e.fn.ready?
"ready":"load"](b);return this.setArray(e.makeArray(b))},jquery:"1.2.6",size:function(){return this.length},length:0,get:function(b){return b==p?e.makeArray(this):this[b]},pushStack:function(b){b=e(b);b.prevObject=this;return b},setArray:function(b){this.length=0;Array.prototype.push.apply(this,b);return this},each:function(b,f){return e.each(this,b,f)},index:function(b){return e.inArray(b&&b.jquery?b[0]:b,this)},attr:function(b,f,h){var i=b;if(b.constructor==String)if(f===p)return this[0]&&e[h||
"attr"](this[0],b);else{i={};i[b]=f}return this.each(function(l){for(b in i)e.attr(h?this.style:this,b,e.prop(this,i[b],h,l,b))})},css:function(b,f){if((b=="width"||b=="height")&&parseFloat(f)<0)f=p;return this.attr(b,f,"curCSS")},text:function(b){if(typeof b!="object"&&b!=null)return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(b));var f="";e.each(b||this,function(){e.each(this.childNodes,function(){if(this.nodeType!=8)f+=this.nodeType!=1?this.nodeValue:e.fn.text([this])})});
return f},wrapAll:function(b){this[0]&&e(b,this[0].ownerDocument).clone().insertBefore(this[0]).map(function(){for(var f=this;f.firstChild;)f=f.firstChild;return f}).append(this);return this},wrapInner:function(b){return this.each(function(){e(this).contents().wrapAll(b)})},wrap:function(b){return this.each(function(){e(this).wrapAll(b)})},append:function(){return this.domManip(arguments,true,false,function(b){this.nodeType==1&&this.appendChild(b)})},prepend:function(){return this.domManip(arguments,
true,true,function(b){this.nodeType==1&&this.insertBefore(b,this.firstChild)})},before:function(){return this.domManip(arguments,false,false,function(b){this.parentNode.insertBefore(b,this)})},after:function(){return this.domManip(arguments,false,true,function(b){this.parentNode.insertBefore(b,this.nextSibling)})},end:function(){return this.prevObject||e([])},find:function(b){var f=e.map(this,function(h){return e.find(b,h)});return this.pushStack(/[^+>] [^+>]/.test(b)||b.indexOf("..")>-1?e.unique(f):
f)},clone:function(b){var f=this.map(function(){if(e.browser.msie&&!e.isXMLDoc(this)){var i=this.cloneNode(true),l=document.createElement("div");l.appendChild(i);return e.clean([l.innerHTML])[0]}else return this.cloneNode(true)}),h=f.find("*").andSelf().each(function(){if(this[v]!=p)this[v]=null});b===true&&this.find("*").andSelf().each(function(i){if(this.nodeType!=3){var l=e.data(this,"events");for(var k in l)for(var m in l[k])e.event.add(h[i],k,l[k][m],l[k][m].data)}});return f},filter:function(b){return this.pushStack(e.isFunction(b)&&
e.grep(this,function(f,h){return b.call(f,h)})||e.multiFilter(b,this))},not:function(b){if(b.constructor==String)if(t.test(b))return this.pushStack(e.multiFilter(b,this,true));else b=e.multiFilter(b,this);var f=b.length&&b[b.length-1]!==p&&!b.nodeType;return this.filter(function(){return f?e.inArray(this,b)<0:this!=b})},add:function(b){return this.pushStack(e.unique(e.merge(this.get(),typeof b=="string"?e(b):e.makeArray(b))))},is:function(b){return!!b&&e.multiFilter(b,this).length>0},hasClass:function(b){return this.is("."+
b)},val:function(b){if(b==p){if(this.length){var f=this[0];if(e.nodeName(f,"select")){var h=f.selectedIndex,i=[],l=f.options;f=f.type=="select-one";if(h<0)return null;var k=f?h:0;for(h=f?h+1:l.length;k<h;k++){var m=l[k];if(m.selected){b=e.browser.msie&&!m.attributes.value.specified?m.text:m.value;if(f)return b;i.push(b)}}return i}else return(this[0].value||"").replace(/\r/g,"")}return p}if(b.constructor==Number)b+="";return this.each(function(){if(this.nodeType==1)if(b.constructor==Array&&/radio|checkbox/.test(this.type))this.checked=
e.inArray(this.value,b)>=0||e.inArray(this.name,b)>=0;else if(e.nodeName(this,"select")){var n=e.makeArray(b);e("option",this).each(function(){this.selected=e.inArray(this.value,n)>=0||e.inArray(this.text,n)>=0});if(!n.length)this.selectedIndex=-1}else this.value=b})},html:function(b){return b==p?this[0]?this[0].innerHTML:null:this.empty().append(b)},replaceWith:function(b){return this.after(b).remove()},eq:function(b){return this.slice(b,b+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,
arguments))},map:function(b){return this.pushStack(e.map(this,function(f,h){return b.call(f,h,f)}))},andSelf:function(){return this.add(this.prevObject)},data:function(b,f){var h=b.split(".");h[1]=h[1]?"."+h[1]:"";if(f===p){var i=this.triggerHandler("getData"+h[1]+"!",[h[0]]);if(i===p&&this.length)i=e.data(this[0],b);return i===p&&h[1]?this.data(h[0]):i}else return this.trigger("setData"+h[1]+"!",[h[0],f]).each(function(){e.data(this,b,f)})},removeData:function(b){return this.each(function(){e.removeData(this,
b)})},domManip:function(b,f,h,i){var l=this.length>1,k;return this.each(function(){if(!k){k=e.clean(b,this.ownerDocument);h&&k.reverse()}var m=this;if(f&&e.nodeName(this,"table")&&e.nodeName(k[0],"tr"))m=this.getElementsByTagName("tbody")[0]||this.appendChild(this.ownerDocument.createElement("tbody"));var n=e([]);e.each(k,function(){var o=l?e(this).clone(true)[0]:this;if(e.nodeName(o,"script"))n=n.add(o);else{if(o.nodeType==1)n=n.add(e("script",o).remove());i.call(m,o)}});n.each(a)})}};e.fn.init.prototype=
e.fn;e.extend=e.fn.extend=function(){var b=arguments[0]||{},f=1,h=arguments.length,i=false,l;if(b.constructor==Boolean){i=b;b=arguments[1]||{};f=2}if(typeof b!="object"&&typeof b!="function")b={};if(h==f){b=this;--f}for(;f<h;f++)if((l=arguments[f])!=null)for(var k in l){var m=b[k],n=l[k];if(b!==n)if(i&&n&&typeof n=="object"&&!n.nodeType)b[k]=e.extend(i,m||(n.length!=null?[]:{}),n);else if(n!==p)b[k]=n}return b};var v="jQuery"+ +new Date,A=0,H={},C=/z-?index|font-?weight|opacity|zoom|line-?height/i,
D=document.defaultView||{};e.extend({noConflict:function(b){window.$=j;if(b)window.jQuery=g;return e},isFunction:function(b){return!!b&&typeof b!="string"&&!b.nodeName&&b.constructor!=Array&&/^[\s[]?function/.test(b+"")},isXMLDoc:function(b){return b.documentElement&&!b.body||b.tagName&&b.ownerDocument&&!b.ownerDocument.body},globalEval:function(b){if(b=e.trim(b)){var f=document.getElementsByTagName("head")[0]||document.documentElement,h=document.createElement("script");h.type="text/javascript";if(e.browser.msie)h.text=
b;else h.appendChild(document.createTextNode(b));f.insertBefore(h,f.firstChild);f.removeChild(h)}},nodeName:function(b,f){return b.nodeName&&b.nodeName.toUpperCase()==f.toUpperCase()},cache:{},data:function(b,f,h){b=b==window?H:b;var i=b[v];i||(i=b[v]=++A);if(f&&!e.cache[i])e.cache[i]={};if(h!==p)e.cache[i][f]=h;return f?e.cache[i][f]:i},removeData:function(b,f){b=b==window?H:b;var h=b[v];if(f){if(e.cache[h]){delete e.cache[h][f];f="";for(f in e.cache[h])break;f||e.removeData(b)}}else{try{delete b[v]}catch(i){b.removeAttribute&&
b.removeAttribute(v)}delete e.cache[h]}},each:function(b,f,h){var i,l=0,k=b.length;if(h)if(k==p)for(i in b){if(f.apply(b[i],h)===false)break}else for(;l<k;){if(f.apply(b[l++],h)===false)break}else if(k==p)for(i in b){if(f.call(b[i],i,b[i])===false)break}else for(h=b[0];l<k&&f.call(h,l,h)!==false;h=b[++l]);return b},prop:function(b,f,h,i,l){if(e.isFunction(f))f=f.call(b,i);return f&&f.constructor==Number&&h=="curCSS"&&!C.test(l)?f+"px":f},className:{add:function(b,f){e.each((f||"").split(/\s+/),function(h,
i){if(b.nodeType==1&&!e.className.has(b.className,i))b.className+=(b.className?" ":"")+i})},remove:function(b,f){if(b.nodeType==1)b.className=f!=p?e.grep(b.className.split(/\s+/),function(h){return!e.className.has(f,h)}).join(" "):""},has:function(b,f){return e.inArray(f,(b.className||b).toString().split(/\s+/))>-1}},swap:function(b,f,h){var i={};for(var l in f){i[l]=b.style[l];b.style[l]=f[l]}h.call(b);for(l in f)b.style[l]=i[l]},css:function(b,f,h){if(f=="width"||f=="height"){var i;h={position:"absolute",
visibility:"hidden",display:"block"};var l=f=="width"?["Left","Right"]:["Top","Bottom"],k=function(){i=f=="width"?b.offsetWidth:b.offsetHeight;var m=0,n=0;e.each(l,function(){m+=parseFloat(e.curCSS(b,"padding"+this,true))||0;n+=parseFloat(e.curCSS(b,"border"+this+"Width",true))||0});i-=Math.round(m+n)};e(b).is(":visible")?k():e.swap(b,h,k);return Math.max(0,i)}return e.curCSS(b,f,h)},curCSS:function(b,f,h){function i(n){if(!e.browser.safari)return false;n=D.getComputedStyle(n,null);return!n||n.getPropertyValue("color")==
""}var l,k=b.style;if(f=="opacity"&&e.browser.msie){l=e.attr(k,"opacity");return l==""?"1":l}if(e.browser.opera&&f=="display"){var m=k.outline;k.outline="0 solid black";k.outline=m}if(f.match(/float/i))f=I;if(!h&&k&&k[f])l=k[f];else if(D.getComputedStyle){if(f.match(/float/i))f="float";f=f.replace(/([A-Z])/g,"-$1").toLowerCase();if((l=D.getComputedStyle(b,null))&&!i(b))l=l.getPropertyValue(f);else{k=[];h=[];m=b;for(b=0;m&&i(m);m=m.parentNode)h.unshift(m);for(;b<h.length;b++)if(i(h[b])){k[b]=h[b].style.display;
h[b].style.display="block"}l=f=="display"&&k[h.length-1]!=null?"none":l&&l.getPropertyValue(f)||"";for(b=0;b<k.length;b++)if(k[b]!=null)h[b].style.display=k[b]}if(f=="opacity"&&l=="")l="1"}else if(b.currentStyle){l=f.replace(/\-(\w)/g,function(n,o){return o.toUpperCase()});l=b.currentStyle[f]||b.currentStyle[l];if(!/^\d+(px)?$/i.test(l)&&/^\d/.test(l)){f=k.left;h=b.runtimeStyle.left;b.runtimeStyle.left=b.currentStyle.left;k.left=l||0;l=k.pixelLeft+"px";k.left=f;b.runtimeStyle.left=h}}return l},clean:function(b,
f){var h=[];f=f||document;if(typeof f.createElement=="undefined")f=f.ownerDocument||f[0]&&f[0].ownerDocument||document;e.each(b,function(i,l){if(l){if(l.constructor==Number)l+="";if(typeof l=="string"){l=l.replace(/(<(\w+)[^>]*?)\/>/g,function(o,r,s){return s.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?o:r+"></"+s+">"});var k=e.trim(l).toLowerCase(),m=f.createElement("div"),n=!k.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!k.indexOf("<leg")&&[1,"<fieldset>",
"</fieldset>"]||k.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!k.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!k.indexOf("<td")||!k.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!k.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||e.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];for(m.innerHTML=n[1]+l+n[2];n[0]--;)m=m.lastChild;if(e.browser.msie){k=!k.indexOf("<table")&&k.indexOf("<tbody")<0?m.firstChild&&m.firstChild.childNodes:
n[1]=="<table>"&&k.indexOf("<tbody")<0?m.childNodes:[];for(n=k.length-1;n>=0;--n)e.nodeName(k[n],"tbody")&&!k[n].childNodes.length&&k[n].parentNode.removeChild(k[n]);/^\s/.test(l)&&m.insertBefore(f.createTextNode(l.match(/^\s*/)[0]),m.firstChild)}l=e.makeArray(m.childNodes)}if(!(l.length===0&&!e.nodeName(l,"form")&&!e.nodeName(l,"select")))if(l[0]==p||e.nodeName(l,"form")||l.options)h.push(l);else h=e.merge(h,l)}});return h},attr:function(b,f,h){if(!b||b.nodeType==3||b.nodeType==8)return p;var i=
!e.isXMLDoc(b),l=h!==p,k=e.browser.msie;f=i&&e.props[f]||f;if(b.tagName){var m=/href|src|style/.test(f);if(f in b&&i&&!m){if(l){if(f=="type"&&e.nodeName(b,"input")&&b.parentNode)throw"type property can't be changed";b[f]=h}if(e.nodeName(b,"form")&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;return b[f]}if(k&&i&&f=="style")return e.attr(b.style,"cssText",h);l&&b.setAttribute(f,""+h);b=k&&i&&m?b.getAttribute(f,2):b.getAttribute(f);return b===null?p:b}if(k&&f=="opacity"){if(l){b.zoom=
1;b.filter=(b.filter||"").replace(/alpha\([^)]*\)/,"")+(parseInt(h)+""=="NaN"?"":"alpha(opacity="+h*100+")")}return b.filter&&b.filter.indexOf("opacity=")>=0?parseFloat(b.filter.match(/opacity=([^)]*)/)[1])/100+"":""}f=f.replace(/-([a-z])/ig,function(n,o){return o.toUpperCase()});if(l)b[f]=h;return b[f]},trim:function(b){return(b||"").replace(/^\s+|\s+$/g,"")},makeArray:function(b){var f=[];if(b!=null){var h=b.length;if(h==null||b.split||b.setInterval||b.call)f[0]=b;else for(;h;)f[--h]=b[h]}return f},
inArray:function(b,f){for(var h=0,i=f.length;h<i;h++)if(f[h]===b)return h;return-1},merge:function(b,f){var h=0,i,l=b.length;if(e.browser.msie)for(;i=f[h++];){if(i.nodeType!=8)b[l++]=i}else for(;i=f[h++];)b[l++]=i;return b},unique:function(b){var f=[],h={};try{for(var i=0,l=b.length;i<l;i++){var k=e.data(b[i]);if(!h[k]){h[k]=true;f.push(b[i])}}}catch(m){f=b}return f},grep:function(b,f,h){for(var i=[],l=0,k=b.length;l<k;l++)!h!=!f(b[l],l)&&i.push(b[l]);return i},map:function(b,f){for(var h=[],i=0,
l=b.length;i<l;i++){var k=f(b[i],i);if(k!=null)h[h.length]=k}return h.concat.apply([],h)}});var B=navigator.userAgent.toLowerCase();e.browser={version:(B.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(B),opera:/opera/.test(B),msie:/msie/.test(B)&&!/opera/.test(B),mozilla:/mozilla/.test(B)&&!/(compatible|webkit)/.test(B)};var I=e.browser.msie?"styleFloat":"cssFloat";e.extend({boxModel:!e.browser.msie||document.compatMode=="CSS1Compat",props:{"for":"htmlFor","class":"className",
"float":I,cssFloat:I,styleFloat:I,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing"}});e.each({parent:function(b){return b.parentNode},parents:function(b){return e.dir(b,"parentNode")},next:function(b){return e.nth(b,2,"nextSibling")},prev:function(b){return e.nth(b,2,"previousSibling")},nextAll:function(b){return e.dir(b,"nextSibling")},prevAll:function(b){return e.dir(b,"previousSibling")},siblings:function(b){return e.sibling(b.parentNode.firstChild,b)},children:function(b){return e.sibling(b.firstChild)},
contents:function(b){return e.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:e.makeArray(b.childNodes)}},function(b,f){e.fn[b]=function(h){var i=e.map(this,f);if(h&&typeof h=="string")i=e.multiFilter(h,i);return this.pushStack(e.unique(i))}});e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,f){e.fn[b]=function(){var h=arguments;return this.each(function(){for(var i=0,l=h.length;i<l;i++)e(h[i])[f](this)})}});
e.each({removeAttr:function(b){e.attr(this,b,"");this.nodeType==1&&this.removeAttribute(b)},addClass:function(b){e.className.add(this,b)},removeClass:function(b){e.className.remove(this,b)},toggleClass:function(b){e.className[e.className.has(this,b)?"remove":"add"](this,b)},remove:function(b){if(!b||e.filter(b,[this]).r.length){e("*",this).add(this).each(function(){e.event.remove(this);e.removeData(this)});this.parentNode&&this.parentNode.removeChild(this)}},empty:function(){for(e(">*",this).remove();this.firstChild;)this.removeChild(this.firstChild)}},
function(b,f){e.fn[b]=function(){return this.each(f,arguments)}});e.each(["Height","Width"],function(b,f){var h=f.toLowerCase();e.fn[h]=function(i){return this[0]==window?e.browser.opera&&document.body["client"+f]||e.browser.safari&&window["inner"+f]||document.compatMode=="CSS1Compat"&&document.documentElement["client"+f]||document.body["client"+f]:this[0]==document?Math.max(Math.max(document.body["scroll"+f],document.documentElement["scroll"+f]),Math.max(document.body["offset"+f],document.documentElement["offset"+
f])):i==p?this.length?e.css(this[0],h):null:this.css(h,i.constructor==String?i:i+"px")}});var E=e.browser.safari&&parseInt(e.browser.version)<417?"(?:[\\w*_-]|\\\\.)":"(?:[\\w\u0128-\uffff*_-]|\\\\.)",N=RegExp("^>\\s*("+E+"+)"),O=RegExp("^("+E+"+)(#)("+E+"+)"),P=RegExp("^([#.]?)("+E+"*)");e.extend({expr:{"":function(b,f,h){return h[2]=="*"||e.nodeName(b,h[2])},"#":function(b,f,h){return b.getAttribute("id")==h[2]},":":{lt:function(b,f,h){return f<h[3]-0},gt:function(b,f,h){return f>h[3]-0},nth:function(b,
f,h){return h[3]-0==f},eq:function(b,f,h){return h[3]-0==f},first:function(b,f){return f==0},last:function(b,f,h,i){return f==i.length-1},even:function(b,f){return f%2==0},odd:function(b,f){return f%2},"first-child":function(b){return b.parentNode.getElementsByTagName("*")[0]==b},"last-child":function(b){return e.nth(b.parentNode.lastChild,1,"previousSibling")==b},"only-child":function(b){return!e.nth(b.parentNode.lastChild,2,"previousSibling")},parent:function(b){return b.firstChild},empty:function(b){return!b.firstChild},
contains:function(b,f,h){return(b.textContent||b.innerText||e(b).text()||"").indexOf(h[3])>=0},visible:function(b){return"hidden"!=b.type&&e.css(b,"display")!="none"&&e.css(b,"visibility")!="hidden"},hidden:function(b){return"hidden"==b.type||e.css(b,"display")=="none"||e.css(b,"visibility")=="hidden"},enabled:function(b){return!b.disabled},disabled:function(b){return b.disabled},checked:function(b){return b.checked},selected:function(b){return b.selected||e.attr(b,"selected")},text:function(b){return"text"==
b.type},radio:function(b){return"radio"==b.type},checkbox:function(b){return"checkbox"==b.type},file:function(b){return"file"==b.type},password:function(b){return"password"==b.type},submit:function(b){return"submit"==b.type},image:function(b){return"image"==b.type},reset:function(b){return"reset"==b.type},button:function(b){return"button"==b.type||e.nodeName(b,"button")},input:function(b){return/input|select|textarea|button/i.test(b.nodeName)},has:function(b,f,h){return e.find(h[3],b).length},header:function(b){return/h\d/i.test(b.nodeName)},
animated:function(b){return e.grep(e.timers,function(f){return b==f.elem}).length}}},parse:[/^(\[) *@?([\w-]+) *([!*$^~=]*) *('?"?)(.*?)\4 *\]/,/^(:)([\w-]+)\("?'?(.*?(\(.*?\))?[^(]*?)"?'?\)/,RegExp("^([:.#]*)("+E+"+)")],multiFilter:function(b,f,h){for(var i,l=[];b&&b!=i;){i=b;var k=e.filter(b,f,h);b=k.t.replace(/^\s*,\s*/,"");l=h?f=k.r:e.merge(l,k.r)}return l},find:function(b,f){if(typeof b!="string")return[b];if(f&&f.nodeType!=1&&f.nodeType!=9)return[];f=f||document;for(var h=[f],i=[],l,k;b&&l!=
b;){var m=[];l=b;b=e.trim(b);k=false;var n=N,o=n.exec(b);if(o){k=o[1].toUpperCase();for(var r=0;h[r];r++)for(o=h[r].firstChild;o;o=o.nextSibling)if(o.nodeType==1&&(k=="*"||o.nodeName.toUpperCase()==k))m.push(o);h=m;b=b.replace(n,"");if(b.indexOf(" ")==0)continue;k=true}else{n=/^([>+~])\s*(\w*)/i;if((o=n.exec(b))!=null){m=[];r={};k=o[2].toUpperCase();o=o[1];for(var s=0,x=h.length;s<x;s++)for(var w=o=="~"||o=="+"?h[s].nextSibling:h[s].firstChild;w;w=w.nextSibling)if(w.nodeType==1){var u=e.data(w);if(o==
"~"&&r[u])break;if(!k||w.nodeName.toUpperCase()==k){if(o=="~")r[u]=true;m.push(w)}if(o=="+")break}h=m;b=e.trim(b.replace(n,""));k=true}}if(b&&!k)if(b.indexOf(",")){n=O;if(o=n.exec(b))o=[0,o[2],o[3],o[1]];else{n=P;o=n.exec(b)}o[2]=o[2].replace(/\\/g,"");k=h[h.length-1];if(o[1]=="#"&&k&&k.getElementById&&!e.isXMLDoc(k)){h=k.getElementById(o[2]);if((e.browser.msie||e.browser.opera)&&h&&typeof h.id=="string"&&h.id!=o[2])h=e('[@id="'+o[2]+'"]',k)[0];h=m=h&&(!o[3]||e.nodeName(h,o[3]))?[h]:[]}else{for(r=
0;h[r];r++){k=o[1]=="#"&&o[3]?o[3]:o[1]!=""||o[0]==""?"*":o[2];if(k=="*"&&h[r].nodeName.toLowerCase()=="object")k="param";m=e.merge(m,h[r].getElementsByTagName(k))}if(o[1]==".")m=e.classFilter(m,o[2]);if(o[1]=="#"){h=[];for(r=0;m[r];r++)if(m[r].getAttribute("id")==o[2]){h=[m[r]];break}m=h}h=m}b=b.replace(n,"")}else{f==h[0]&&h.shift();i=e.merge(i,h);m=h=[f];b=" "+b.substr(1,b.length)}if(b){m=e.filter(b,m);h=m.r;b=e.trim(m.t)}}if(b)h=[];h&&f==h[0]&&h.shift();return i=e.merge(i,h)},classFilter:function(b,
f,h){f=" "+f+" ";for(var i=[],l=0;b[l];l++){var k=(" "+b[l].className+" ").indexOf(f)>=0;if(!h&&k||h&&!k)i.push(b[l])}return i},filter:function(b,f,h){for(var i;b&&b!=i;){i=b;for(var l=e.parse,k,m=0;l[m];m++)if(k=l[m].exec(b)){b=b.substring(k[0].length);k[2]=k[2].replace(/\\/g,"");break}if(!k)break;if(k[1]==":"&&k[2]=="not")f=t.test(k[3])?e.filter(k[3],f,true).r:e(f).not(k[3]);else if(k[1]==".")f=e.classFilter(f,k[2],h);else if(k[1]=="["){l=[];var n=k[3];m=0;for(var o=f.length;m<o;m++){var r=f[m],
s=r[e.props[k[2]]||k[2]];if(s==null||/href|src|selected/.test(k[2]))s=e.attr(r,k[2])||"";if((n==""&&!!s||n=="="&&s==k[5]||n=="!="&&s!=k[5]||n=="^="&&s&&!s.indexOf(k[5])||n=="$="&&s.substr(s.length-k[5].length)==k[5]||(n=="*="||n=="~=")&&s.indexOf(k[5])>=0)^h)l.push(r)}f=l}else if(k[1]==":"&&k[2]=="nth-child"){n={};l=[];i=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(k[3]=="even"&&"2n"||k[3]=="odd"&&"2n+1"||!/\D/.test(k[3])&&"0n+"+k[3]||k[3]);r=i[1]+(i[2]||1)-0;i=i[3]-0;m=0;for(o=f.length;m<o;m++){s=f[m];var x=
s.parentNode,w=e.data(x);if(!n[w]){var u=1;for(x=x.firstChild;x;x=x.nextSibling)if(x.nodeType==1)x.nodeIndex=u++;n[w]=true}w=false;if(r==0){if(s.nodeIndex==i)w=true}else if((s.nodeIndex-i)%r==0&&(s.nodeIndex-i)/r>=0)w=true;w^h&&l.push(s)}f=l}else{var y=e.expr[k[1]];if(typeof y=="object")y=y[k[2]];if(typeof y=="string")y=eval("false||function(a,i){return "+y+";}");f=e.grep(f,function(z,F){return y(z,F,k,f)},h)}}return{r:f,t:b}},dir:function(b,f){for(var h=[],i=b[f];i&&i!=document;){i.nodeType==1&&
h.push(i);i=i[f]}return h},nth:function(b,f,h){f=f||1;for(var i=0;b;b=b[h])if(b.nodeType==1&&++i==f)break;return b},sibling:function(b,f){for(var h=[];b;b=b.nextSibling)b.nodeType==1&&b!=f&&h.push(b);return h}});e.event={add:function(b,f,h,i){if(!(b.nodeType==3||b.nodeType==8)){if(e.browser.msie&&b.setInterval)b=window;if(!h.guid)h.guid=this.guid++;if(i!=p){var l=h;h=this.proxy(l,function(){return l.apply(this,arguments)});h.data=i}var k=e.data(b,"events")||e.data(b,"events",{}),m=e.data(b,"handle")||
e.data(b,"handle",function(){if(typeof e!="undefined"&&!e.event.triggered)return e.event.handle.apply(arguments.callee.elem,arguments)});m.elem=b;e.each(f.split(/\s+/),function(n,o){var r=o.split(".");o=r[0];h.type=r[1];r=k[o];if(!r){r=k[o]={};if(!e.event.special[o]||e.event.special[o].setup.call(b)===false)if(b.addEventListener)b.addEventListener(o,m,false);else b.attachEvent&&b.attachEvent("on"+o,m)}r[h.guid]=h;e.event.global[o]=true});b=null}},guid:1,global:{},remove:function(b,f,h){if(!(b.nodeType==
3||b.nodeType==8)){var i=e.data(b,"events"),l;if(i){if(f==p||typeof f=="string"&&f.charAt(0)==".")for(var k in i)this.remove(b,k+(f||""));else{if(f.type){h=f.handler;f=f.type}e.each(f.split(/\s+/),function(m,n){var o=n.split(".");n=o[0];if(i[n]){if(h)delete i[n][h.guid];else for(h in i[n])if(!o[1]||i[n][h].type==o[1])delete i[n][h];for(l in i[n])break;if(!l){if(!e.event.special[n]||e.event.special[n].teardown.call(b)===false)if(b.removeEventListener)b.removeEventListener(n,e.data(b,"handle"),false);
else b.detachEvent&&b.detachEvent("on"+n,e.data(b,"handle"));l=null;delete i[n]}}})}for(l in i)break;if(!l){if(f=e.data(b,"handle"))f.elem=null;e.removeData(b,"events");e.removeData(b,"handle")}}}},trigger:function(b,f,h,i,l){f=e.makeArray(f);if(b.indexOf("!")>=0){b=b.slice(0,-1);var k=true}if(h){if(h.nodeType==3||h.nodeType==8)return p;var m,n=e.isFunction(h[b]||null),o=!f[0]||!f[0].preventDefault;if(o){f.unshift({type:b,target:h,preventDefault:function(){},stopPropagation:function(){},timeStamp:+new Date});
f[0][v]=true}f[0].type=b;if(k)f[0].exclusive=true;if(k=e.data(h,"handle"))m=k.apply(h,f);if((!n||e.nodeName(h,"a")&&b=="click")&&h["on"+b]&&h["on"+b].apply(h,f)===false)m=false;o&&f.shift();if(l&&e.isFunction(l)){f=l.apply(h,m==null?f:f.concat(m));if(f!==p)m=f}if(n&&i!==false&&m!==false&&!(e.nodeName(h,"a")&&b=="click")){this.triggered=true;try{h[b]()}catch(r){}}this.triggered=false}else this.global[b]&&e("*").add([window,document]).trigger(b,f);return m},handle:function(b){var f,h,i,l,k;b=arguments[0]=
e.event.fix(b||window.event);i=b.type.split(".");b.type=i[0];i=i[1];l=!i&&!b.exclusive;k=(e.data(this,"events")||{})[b.type];for(var m in k){h=k[m];if(l||h.type==i){b.handler=h;b.data=h.data;h=h.apply(this,arguments);if(f!==false)f=h;if(h===false){b.preventDefault();b.stopPropagation()}}}return f},fix:function(b){if(b[v]==true)return b;var f=b;b={originalEvent:f};for(var h="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view wheelDelta which".split(" "),
i=h.length;i;i--)b[h[i]]=f[h[i]];b[v]=true;b.preventDefault=function(){f.preventDefault&&f.preventDefault();f.returnValue=false};b.stopPropagation=function(){f.stopPropagation&&f.stopPropagation();f.cancelBubble=true};b.timeStamp=b.timeStamp||+new Date;if(!b.target)b.target=b.srcElement||document;if(b.target.nodeType==3)b.target=b.target.parentNode;if(!b.relatedTarget&&b.fromElement)b.relatedTarget=b.fromElement==b.target?b.toElement:b.fromElement;if(b.pageX==null&&b.clientX!=null){h=document.documentElement;
i=document.body;b.pageX=b.clientX+(h&&h.scrollLeft||i&&i.scrollLeft||0)-(h.clientLeft||0);b.pageY=b.clientY+(h&&h.scrollTop||i&&i.scrollTop||0)-(h.clientTop||0)}if(!b.which&&(b.charCode||b.charCode===0?b.charCode:b.keyCode))b.which=b.charCode||b.keyCode;if(!b.metaKey&&b.ctrlKey)b.metaKey=b.ctrlKey;if(!b.which&&b.button)b.which=b.button&1?1:b.button&2?3:b.button&4?2:0;return b},proxy:function(b,f){f.guid=b.guid=b.guid||f.guid||this.guid++;return f},special:{ready:{setup:function(){d()},teardown:function(){}},
mouseenter:{setup:function(){if(e.browser.msie)return false;e(this).bind("mouseover",e.event.special.mouseenter.handler);return true},teardown:function(){if(e.browser.msie)return false;e(this).unbind("mouseover",e.event.special.mouseenter.handler);return true},handler:function(b){if(M(b,this))return true;b.type="mouseenter";return e.event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(e.browser.msie)return false;e(this).bind("mouseout",e.event.special.mouseleave.handler);return true},
teardown:function(){if(e.browser.msie)return false;e(this).unbind("mouseout",e.event.special.mouseleave.handler);return true},handler:function(b){if(M(b,this))return true;b.type="mouseleave";return e.event.handle.apply(this,arguments)}}}};e.fn.extend({bind:function(b,f,h){return b=="unload"?this.one(b,f,h):this.each(function(){e.event.add(this,b,h||f,h&&f)})},one:function(b,f,h){var i=e.event.proxy(h||f,function(l){e(this).unbind(l,i);return(h||f).apply(this,arguments)});return this.each(function(){e.event.add(this,
b,i,h&&f)})},unbind:function(b,f){return this.each(function(){e.event.remove(this,b,f)})},trigger:function(b,f,h){return this.each(function(){e.event.trigger(b,f,this,true,h)})},triggerHandler:function(b,f,h){return this[0]&&e.event.trigger(b,f,this[0],false,h)},toggle:function(b){for(var f=arguments,h=1;h<f.length;)e.event.proxy(b,f[h++]);return this.click(e.event.proxy(b,function(i){this.lastToggle=(this.lastToggle||0)%h;i.preventDefault();return f[this.lastToggle++].apply(this,arguments)||false}))},
hover:function(b,f){return this.bind("mouseenter",b).bind("mouseleave",f)},ready:function(b){d();e.isReady?b.call(document,e):e.readyList.push(function(){return b.call(this,e)});return this}});e.extend({isReady:false,readyList:[],ready:function(){if(!e.isReady){e.isReady=true;if(e.readyList){e.each(e.readyList,function(){this.call(document)});e.readyList=null}e(document).triggerHandler("ready")}}});var L=false;e.each("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,change,select,submit,keydown,keypress,keyup,error".split(","),
function(b,f){e.fn[f]=function(h){return h?this.bind(f,h):this.trigger(f)}});var M=function(b,f){for(var h=b.relatedTarget;h&&h!=f;)try{h=h.parentNode}catch(i){h=f}return h==f};e(window).bind("unload",function(){e("*").add(document).unbind()});e.fn.extend({_load:e.fn.load,load:function(b,f,h){if(typeof b!="string")return this._load(b);var i=b.indexOf(" ");if(i>=0){var l=b.slice(i,b.length);b=b.slice(0,i)}h=h||function(){};i="GET";if(f)if(e.isFunction(f)){h=f;f=null}else{f=e.param(f);i="POST"}var k=
this;e.ajax({url:b,type:i,dataType:"html",data:f,complete:function(m,n){if(n=="success"||n=="notmodified")k.html(l?e("<div/>").append(m.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(l):m.responseText);k.each(h,[m.responseText,n,m])}});return this},serialize:function(){return e.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return e.nodeName(this,"form")?e.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||
/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type))}).map(function(b,f){var h=e(this).val();return h==null?null:h.constructor==Array?e.map(h,function(i){return{name:f.name,value:i}}):{name:f.name,value:h}}).get()}});e.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(b,f){e.fn[f]=function(h){return this.bind(f,h)}});var Q=+new Date;e.extend({get:function(b,f,h,i){if(e.isFunction(f)){h=f;f=null}return e.ajax({type:"GET",url:b,data:f,
success:h,dataType:i})},getScript:function(b,f){return e.get(b,null,f,"script")},getJSON:function(b,f,h){return e.get(b,f,h,"json")},post:function(b,f,h,i){if(e.isFunction(f)){h=f;f={}}return e.ajax({type:"POST",url:b,data:f,success:h,dataType:i})},ajaxSetup:function(b){e.extend(e.ajaxSettings,b)},ajaxSettings:{url:location.href,global:true,type:"GET",timeout:0,contentType:"application/x-www-form-urlencoded",processData:true,async:true,data:null,username:null,password:null,accepts:{xml:"application/xml, text/xml",
html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(b){function f(){b.success&&b.success(m,k);b.global&&e.event.trigger("ajaxSuccess",[u,b])}function h(){b.complete&&b.complete(u,k);b.global&&e.event.trigger("ajaxComplete",[u,b]);b.global&&!--e.active&&e.event.trigger("ajaxStop")}b=e.extend(true,b,e.extend(true,{},e.ajaxSettings,b));var i,l=/=\?(&|$)/g,k,m,n=b.type.toUpperCase();
if(b.data&&b.processData&&typeof b.data!="string")b.data=e.param(b.data);if(b.dataType=="jsonp"){if(n=="GET")b.url.match(l)||(b.url+=(b.url.match(/\?/)?"&":"?")+(b.jsonp||"callback")+"=?");else if(!b.data||!b.data.match(l))b.data=(b.data?b.data+"&":"")+(b.jsonp||"callback")+"=?";b.dataType="json"}if(b.dataType=="json"&&(b.data&&b.data.match(l)||b.url.match(l))){i="jsonp"+Q++;if(b.data)b.data=(b.data+"").replace(l,"="+i+"$1");b.url=b.url.replace(l,"="+i+"$1");b.dataType="script";window[i]=function(J){m=
J;f();h();window[i]=p;try{delete window[i]}catch(R){}r&&r.removeChild(s)}}if(b.dataType=="script"&&b.cache==null)b.cache=false;if(b.cache===false&&n=="GET"){l=+new Date;var o=b.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+l+"$2");b.url=o+(o==b.url?(b.url.match(/\?/)?"&":"?")+"_="+l:"")}if(b.data&&n=="GET"){b.url+=(b.url.match(/\?/)?"&":"?")+b.data;b.data=null}b.global&&!e.active++&&e.event.trigger("ajaxStart");l=/^(?:\w+:)?\/\/([^\/?#]+)/;if(b.dataType=="script"&&n=="GET"&&l.test(b.url)&&l.exec(b.url)[1]!=
location.host){var r=document.getElementsByTagName("head")[0],s=document.createElement("script");s.src=b.url;if(b.scriptCharset)s.charset=b.scriptCharset;if(!i){var x=false;s.onload=s.onreadystatechange=function(){if(!x&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){x=true;f();h();r.removeChild(s)}}}r.appendChild(s);return p}var w=false,u=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;b.username?u.open(n,b.url,b.async,b.username,b.password):
u.open(n,b.url,b.async);try{b.data&&u.setRequestHeader("Content-Type",b.contentType);if(b.ifModified)u.setRequestHeader("If-Modified-Since",e.lastModified[b.url]||"Thu, 01 Jan 1970 00:00:00 GMT");u.setRequestHeader("X-Requested-With","XMLHttpRequest");u.setRequestHeader("Accept",b.dataType&&b.accepts[b.dataType]?b.accepts[b.dataType]+", */*":b.accepts._default)}catch(y){}if(b.beforeSend&&b.beforeSend(u,b)===false){b.global&&e.active--;u.abort();return false}b.global&&e.event.trigger("ajaxSend",[u,
b]);var z=function(J){if(!w&&u&&(u.readyState==4||J=="timeout")){w=true;if(F){clearInterval(F);F=null}k=J=="timeout"&&"timeout"||!e.httpSuccess(u)&&"error"||b.ifModified&&e.httpNotModified(u,b.url)&&"notmodified"||"success";if(k=="success")try{m=e.httpData(u,b.dataType,b.dataFilter)}catch(R){k="parsererror"}if(k=="success"){var K;try{K=u.getResponseHeader("Last-Modified")}catch(T){}if(b.ifModified&&K)e.lastModified[b.url]=K;i||f()}else e.handleError(b,u,k);h();if(b.async)u=null}};if(b.async){var F=
setInterval(z,13);b.timeout>0&&setTimeout(function(){if(u){u.abort();w||z("timeout")}},b.timeout)}try{u.send(b.data)}catch(S){e.handleError(b,u,null,S)}b.async||z();return u},handleError:function(b,f,h,i){b.error&&b.error(f,h,i);b.global&&e.event.trigger("ajaxError",[f,b,i])},active:0,httpSuccess:function(b){try{return!b.status&&location.protocol=="file:"||b.status>=200&&b.status<300||b.status==304||b.status==1223||e.browser.safari&&b.status==p}catch(f){}return false},httpNotModified:function(b,f){try{var h=
b.getResponseHeader("Last-Modified");return b.status==304||h==e.lastModified[f]||e.browser.safari&&b.status==p}catch(i){}return false},httpData:function(b,f,h){var i=b.getResponseHeader("content-type");b=(i=f=="xml"||!f&&i&&i.indexOf("xml")>=0)?b.responseXML:b.responseText;if(i&&b.documentElement.tagName=="parsererror")throw"parsererror";if(h)b=h(b,f);f=="script"&&e.globalEval(b);if(f=="json")b=eval("("+b+")");return b},param:function(b){var f=[];if(b.constructor==Array||b.jquery)e.each(b,function(){f.push(encodeURIComponent(this.name)+
"="+encodeURIComponent(this.value))});else for(var h in b)b[h]&&b[h].constructor==Array?e.each(b[h],function(){f.push(encodeURIComponent(h)+"="+encodeURIComponent(this))}):f.push(encodeURIComponent(h)+"="+encodeURIComponent(e.isFunction(b[h])?b[h]():b[h]));return f.join("&").replace(/%20/g,"+")}});e.fn.extend({show:function(b,f){return b?this.animate({height:"show",width:"show",opacity:"show"},b,f):this.filter(":hidden").each(function(){this.style.display=this.oldblock||"";if(e.css(this,"display")==
"none"){var h=e("<"+this.tagName+" />").appendTo("body");this.style.display=h.css("display");if(this.style.display=="none")this.style.display="block";h.remove()}}).end()},hide:function(b,f){return b?this.animate({height:"hide",width:"hide",opacity:"hide"},b,f):this.filter(":visible").each(function(){this.oldblock=this.oldblock||e.css(this,"display");this.style.display="none"}).end()},_toggle:e.fn.toggle,toggle:function(b,f){return e.isFunction(b)&&e.isFunction(f)?this._toggle.apply(this,arguments):
b?this.animate({height:"toggle",width:"toggle",opacity:"toggle"},b,f):this.each(function(){e(this)[e(this).is(":hidden")?"show":"hide"]()})},slideDown:function(b,f){return this.animate({height:"show"},b,f)},slideUp:function(b,f){return this.animate({height:"hide"},b,f)},slideToggle:function(b,f){return this.animate({height:"toggle"},b,f)},fadeIn:function(b,f){return this.animate({opacity:"show"},b,f)},fadeOut:function(b,f){return this.animate({opacity:"hide"},b,f)},fadeTo:function(b,f,h){return this.animate({opacity:f},
b,h)},animate:function(b,f,h,i){var l=e.speed(f,h,i);return this[l.queue===false?"each":"queue"](function(){if(this.nodeType!=1)return false;var k=e.extend({},l),m,n=e(this).is(":hidden"),o=this;for(m in b){if(b[m]=="hide"&&n||b[m]=="show"&&!n)return k.complete.call(this);if(m=="height"||m=="width"){k.display=e.css(this,"display");k.overflow=this.style.overflow}}if(k.overflow!=null)this.style.overflow="hidden";k.curAnim=e.extend({},b);e.each(b,function(r,s){var x=new e.fx(o,k,r);if(/toggle|show|hide/.test(s))x[s==
"toggle"?n?"show":"hide":s](b);else{var w=s.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),u=x.cur(true)||0;if(w){var y=parseFloat(w[2]),z=w[3]||"px";if(z!="px"){o.style[r]=(y||1)+z;u=(y||1)/x.cur(true)*u;o.style[r]=u+z}if(w[1])y=(w[1]=="-="?-1:1)*y+u;x.custom(u,y,z)}else x.custom(u,s,"")}});return true})},queue:function(b,f){if(e.isFunction(b)||b&&b.constructor==Array){f=b;b="fx"}if(!b||typeof b=="string"&&!f)return G(this[0],b);return this.each(function(){if(f.constructor==Array)G(this,b,f);else{G(this,
b).push(f);G(this,b).length==1&&f.call(this)}})},stop:function(b,f){var h=e.timers;b&&this.queue([]);this.each(function(){for(var i=h.length-1;i>=0;i--)if(h[i].elem==this){f&&h[i](true);h.splice(i,1)}});f||this.dequeue();return this}});var G=function(b,f,h){if(b){f=f||"fx";var i=e.data(b,f+"queue");if(!i||h)i=e.data(b,f+"queue",e.makeArray(h))}return i};e.fn.dequeue=function(b){b=b||"fx";return this.each(function(){var f=G(this,b);f.shift();f.length&&f[0].call(this)})};e.extend({speed:function(b,
f,h){var i=b&&b.constructor==Object?b:{complete:h||!h&&f||e.isFunction(b)&&b,duration:b,easing:h&&f||f&&f.constructor!=Function&&f};i.duration=(i.duration&&i.duration.constructor==Number?i.duration:e.fx.speeds[i.duration])||e.fx.speeds.def;i.old=i.complete;i.complete=function(){i.queue!==false&&e(this).dequeue();e.isFunction(i.old)&&i.old.call(this)};return i},easing:{linear:function(b,f,h,i){return h+i*b},swing:function(b,f,h,i){return(-Math.cos(b*Math.PI)/2+0.5)*i+h}},timers:[],timerId:null,fx:function(b,
f,h){this.options=f;this.elem=b;this.prop=h;if(!f.orig)f.orig={}}});e.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(e.fx.step[this.prop]||e.fx.step._default)(this);if(this.prop=="height"||this.prop=="width")this.elem.style.display="block"},cur:function(b){if(this.elem[this.prop]!=null&&this.elem.style[this.prop]==null)return this.elem[this.prop];return(b=parseFloat(e.css(this.elem,this.prop,b)))&&b>-10000?b:parseFloat(e.curCSS(this.elem,this.prop))||
0},custom:function(b,f,h){function i(k){return l.step(k)}this.startTime=+new Date;this.start=b;this.end=f;this.unit=h||this.unit||"px";this.now=this.start;this.pos=this.state=0;this.update();var l=this;i.elem=this.elem;e.timers.push(i);if(e.timerId==null)e.timerId=setInterval(function(){for(var k=e.timers,m=0;m<k.length;m++)k[m]()||k.splice(m--,1);if(!k.length){clearInterval(e.timerId);e.timerId=null}},13)},show:function(){this.options.orig[this.prop]=e.attr(this.elem.style,this.prop);this.options.show=
true;this.custom(0,this.cur());if(this.prop=="width"||this.prop=="height")this.elem.style[this.prop]="1px";e(this.elem).show()},hide:function(){this.options.orig[this.prop]=e.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(b){var f=+new Date;if(b||f>this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();b=this.options.curAnim[this.prop]=true;for(var h in this.options.curAnim)if(this.options.curAnim[h]!==true)b=false;
if(b){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(e.css(this.elem,"display")=="none")this.elem.style.display="block"}if(this.options.hide)this.elem.style.display="none";if(this.options.hide||this.options.show)for(var i in this.options.curAnim)e.attr(this.elem.style,i,this.options.orig[i])}b&&this.options.complete.call(this.elem);return false}else{h=f-this.startTime;this.state=h/this.options.duration;this.pos=e.easing[this.options.easing||
(e.easing.swing?"swing":"linear")](this.state,h,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};e.extend(e.fx,{speeds:{slow:600,fast:200,def:400},step:{scrollLeft:function(b){b.elem.scrollLeft=b.now},scrollTop:function(b){b.elem.scrollTop=b.now},opacity:function(b){e.attr(b.elem.style,"opacity",b.now)},_default:function(b){b.elem.style[b.prop]=b.now+b.unit}}});e.fn.offset=function(){function b(w){f(e.curCSS(w,"borderLeftWidth",true),e.curCSS(w,
"borderTopWidth",true))}function f(w,u){h+=parseInt(w,10)||0;i+=parseInt(u,10)||0}var h=0,i=0,l=this[0],k;if(l)with(e.browser){var m=l.parentNode,n=l,o=l.offsetParent;k=l.ownerDocument;var r=safari&&parseInt(version)<522&&!/adobeair/i.test(B),s=e.curCSS,x=s(l,"position")=="fixed";if(l.getBoundingClientRect){l=l.getBoundingClientRect();f(l.left+Math.max(k.documentElement.scrollLeft,k.body.scrollLeft),l.top+Math.max(k.documentElement.scrollTop,k.body.scrollTop));f(-k.documentElement.clientLeft,-k.documentElement.clientTop)}else{for(f(l.offsetLeft,
l.offsetTop);o;){f(o.offsetLeft,o.offsetTop);if(mozilla&&!/^t(able|d|h)$/i.test(o.tagName)||safari&&!r)b(o);if(!x&&s(o,"position")=="fixed")x=true;n=/^body$/i.test(o.tagName)?n:o;o=o.offsetParent}for(;m&&m.tagName&&!/^body|html$/i.test(m.tagName);){/^inline|table.*$/i.test(s(m,"display"))||f(-m.scrollLeft,-m.scrollTop);mozilla&&s(m,"overflow")!="visible"&&b(m);m=m.parentNode}if(r&&(x||s(n,"position")=="absolute")||mozilla&&s(n,"position")!="absolute")f(-k.body.offsetLeft,-k.body.offsetTop);x&&f(Math.max(k.documentElement.scrollLeft,
k.body.scrollLeft),Math.max(k.documentElement.scrollTop,k.body.scrollTop))}k={top:i,left:h}}return k};e.fn.extend({position:function(){var b;if(this[0]){b=this.offsetParent();var f=this.offset(),h=/^body|html$/i.test(b[0].tagName)?{top:0,left:0}:b.offset();f.top-=c(this,"marginTop");f.left-=c(this,"marginLeft");h.top+=c(b,"borderTopWidth");h.left+=c(b,"borderLeftWidth");b={top:f.top-h.top,left:f.left-h.left}}return b},offsetParent:function(){for(var b=this[0].offsetParent;b&&!/^body|html$/i.test(b.tagName)&&
e.css(b,"position")=="static";)b=b.offsetParent;return e(b)}});e.each(["Left","Top"],function(b,f){var h="scroll"+f;e.fn[h]=function(i){if(this[0])return i!=p?this.each(function(){this==window||this==document?window.scrollTo(!b?i:e(window).scrollLeft(),b?i:e(window).scrollTop()):this[h]=i}):this[0]==window||this[0]==document?self[b?"pageYOffset":"pageXOffset"]||e.boxModel&&document.documentElement[h]||document.body[h]:this[0][h]}});e.each(["Height","Width"],function(b,f){var h=b?"Left":"Top",i=b?
"Right":"Bottom";e.fn["inner"+f]=function(){return this[f.toLowerCase()]()+c(this,"padding"+h)+c(this,"padding"+i)};e.fn["outer"+f]=function(l){return this["inner"+f]()+c(this,"border"+h+"Width")+c(this,"border"+i+"Width")+(l?c(this,"margin"+h)+c(this,"margin"+i):0)}})})();jQuery.noConflict();Ajax.Responders.register({onCreate:function(){$("ajax_indicator").setStyle({visibility:"visible"})},onComplete:function(){$("ajax_indicator").setStyle({visibility:"hidden"})},onException:function(){$("ajax_indicator").setStyle({visibility:"hidden"})}});
